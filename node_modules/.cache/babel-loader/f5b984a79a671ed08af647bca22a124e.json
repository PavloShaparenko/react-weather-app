{"ast":null,"code":"// weatherApi.js\nconst API_KEY = '86f7352254b44be6841171331263001';\nexport const fetchWeatherData = async city => {\n  // 1. Logika poprawy nazw miast\n  let query = city.trim();\n  if (query.toLowerCase() === 'vinnytsia') query = 'Vinnitsa';\n  if (query.toLowerCase() === 'kiev') query = 'Kyiv'; // Ważne dla dokładności\n\n  try {\n    const response = await fetch(`https://api.weatherapi.com/v1/forecast.json?key=${API_KEY}&q=${encodeURIComponent(query)}&days=2`);\n\n    if (!response.ok) {\n      throw new Error('City not found');\n    }\n\n    const json = await response.json(); // 2. Łączenie danych z dwóch dni (48 godzin)\n\n    const combinedHours = [...json.forecast.forecastday[0].hour, ...json.forecast.forecastday[1].hour]; // 3. Formatowanie danych pod wykres\n\n    const formattedChartData = combinedHours.map(h => ({\n      fullTime: h.time,\n      // Klucz unikalny: \"2024-05-20 14:00\"\n      time: h.time.split(' ')[1],\n      // Wyświetlanie: \"14:00\"\n      temp: h.temp_c,\n      feelsLike: h.feelslike_c,\n      icon: h.condition.icon\n    })); // Zwracamy gotowy obiekt z danymi\n\n    return {\n      chartData: formattedChartData,\n      astro: json.forecast.forecastday[0].astro,\n      // Wschód/zachód słońca na dziś\n      locationName: json.location.name // Aktualna nazwa miasta z API\n\n    };\n  } catch (error) {\n    throw error; // Rzucamy błąd dalej, żeby React mógł go złapać\n  }\n};","map":{"version":3,"names":["API_KEY","fetchWeatherData","city","query","trim","toLowerCase","response","fetch","encodeURIComponent","ok","Error","json","combinedHours","forecast","forecastday","hour","formattedChartData","map","h","fullTime","time","split","temp","temp_c","feelsLike","feelslike_c","icon","condition","chartData","astro","locationName","location","name","error"],"sources":["C:/Users/HP/Desktop/react-projects/Project-weathe/Projekt/src/widgets/api.js"],"sourcesContent":["// weatherApi.js\r\n\r\nconst API_KEY = '86f7352254b44be6841171331263001';\r\n\r\nexport const fetchWeatherData = async (city) => {\r\n  // 1. Logika poprawy nazw miast\r\n  let query = city.trim();\r\n  if (query.toLowerCase() === 'vinnytsia') query = 'Vinnitsa';\r\n  if (query.toLowerCase() === 'kiev') query = 'Kyiv'; // Ważne dla dokładności\r\n\r\n  try {\r\n    const response = await fetch(\r\n      `https://api.weatherapi.com/v1/forecast.json?key=${API_KEY}&q=${encodeURIComponent(query)}&days=2`\r\n    );\r\n\r\n    if (!response.ok) {\r\n      throw new Error('City not found');\r\n    }\r\n\r\n    const json = await response.json();\r\n\r\n    // 2. Łączenie danych z dwóch dni (48 godzin)\r\n    const combinedHours = [\r\n      ...json.forecast.forecastday[0].hour,\r\n      ...json.forecast.forecastday[1].hour\r\n    ];\r\n\r\n    // 3. Formatowanie danych pod wykres\r\n    const formattedChartData = combinedHours.map(h => ({\r\n      fullTime: h.time,         // Klucz unikalny: \"2024-05-20 14:00\"\r\n      time: h.time.split(' ')[1], // Wyświetlanie: \"14:00\"\r\n      temp: h.temp_c,\r\n      feelsLike: h.feelslike_c,\r\n      icon: h.condition.icon\r\n    }));\r\n\r\n    // Zwracamy gotowy obiekt z danymi\r\n    return {\r\n      chartData: formattedChartData,\r\n      astro: json.forecast.forecastday[0].astro, // Wschód/zachód słońca na dziś\r\n      locationName: json.location.name // Aktualna nazwa miasta z API\r\n    };\r\n\r\n  } catch (error) {\r\n    throw error; // Rzucamy błąd dalej, żeby React mógł go złapać\r\n  }\r\n};"],"mappings":"AAAA;AAEA,MAAMA,OAAO,GAAG,iCAAhB;AAEA,OAAO,MAAMC,gBAAgB,GAAG,MAAOC,IAAP,IAAgB;EAC9C;EACA,IAAIC,KAAK,GAAGD,IAAI,CAACE,IAAL,EAAZ;EACA,IAAID,KAAK,CAACE,WAAN,OAAwB,WAA5B,EAAyCF,KAAK,GAAG,UAAR;EACzC,IAAIA,KAAK,CAACE,WAAN,OAAwB,MAA5B,EAAoCF,KAAK,GAAG,MAAR,CAJU,CAIM;;EAEpD,IAAI;IACF,MAAMG,QAAQ,GAAG,MAAMC,KAAK,CACzB,mDAAkDP,OAAQ,MAAKQ,kBAAkB,CAACL,KAAD,CAAQ,SADhE,CAA5B;;IAIA,IAAI,CAACG,QAAQ,CAACG,EAAd,EAAkB;MAChB,MAAM,IAAIC,KAAJ,CAAU,gBAAV,CAAN;IACD;;IAED,MAAMC,IAAI,GAAG,MAAML,QAAQ,CAACK,IAAT,EAAnB,CATE,CAWF;;IACA,MAAMC,aAAa,GAAG,CACpB,GAAGD,IAAI,CAACE,QAAL,CAAcC,WAAd,CAA0B,CAA1B,EAA6BC,IADZ,EAEpB,GAAGJ,IAAI,CAACE,QAAL,CAAcC,WAAd,CAA0B,CAA1B,EAA6BC,IAFZ,CAAtB,CAZE,CAiBF;;IACA,MAAMC,kBAAkB,GAAGJ,aAAa,CAACK,GAAd,CAAkBC,CAAC,KAAK;MACjDC,QAAQ,EAAED,CAAC,CAACE,IADqC;MACvB;MAC1BA,IAAI,EAAEF,CAAC,CAACE,IAAF,CAAOC,KAAP,CAAa,GAAb,EAAkB,CAAlB,CAF2C;MAErB;MAC5BC,IAAI,EAAEJ,CAAC,CAACK,MAHyC;MAIjDC,SAAS,EAAEN,CAAC,CAACO,WAJoC;MAKjDC,IAAI,EAAER,CAAC,CAACS,SAAF,CAAYD;IAL+B,CAAL,CAAnB,CAA3B,CAlBE,CA0BF;;IACA,OAAO;MACLE,SAAS,EAAEZ,kBADN;MAELa,KAAK,EAAElB,IAAI,CAACE,QAAL,CAAcC,WAAd,CAA0B,CAA1B,EAA6Be,KAF/B;MAEsC;MAC3CC,YAAY,EAAEnB,IAAI,CAACoB,QAAL,CAAcC,IAHvB,CAG4B;;IAH5B,CAAP;EAMD,CAjCD,CAiCE,OAAOC,KAAP,EAAc;IACd,MAAMA,KAAN,CADc,CACD;EACd;AACF,CA1CM"},"metadata":{},"sourceType":"module"}