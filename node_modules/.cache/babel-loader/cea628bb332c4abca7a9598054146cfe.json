{"ast":null,"code":"var _excluded = [\"onMouseEnter\", \"onClick\", \"onMouseLeave\", \"shape\", \"activeShape\"],\n    _excluded2 = [\"id\"],\n    _excluded3 = [\"stroke\", \"fill\", \"legendType\", \"hide\", \"isAnimationActive\", \"animationBegin\", \"animationDuration\", \"animationEasing\", \"nameKey\", \"lastShapeType\", \"id\"],\n    _excluded4 = [\"id\"];\n\nfunction _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n\n    return n;\n  }, _extends.apply(null, arguments);\n}\n\nfunction _objectWithoutProperties(e, t) {\n  if (null == e) return {};\n\n  var o,\n      r,\n      i = _objectWithoutPropertiesLoose(e, t);\n\n  if (Object.getOwnPropertySymbols) {\n    var n = Object.getOwnPropertySymbols(e);\n\n    for (r = 0; r < n.length; r++) o = n[r], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]);\n  }\n\n  return i;\n}\n\nfunction _objectWithoutPropertiesLoose(r, e) {\n  if (null == r) return {};\n  var t = {};\n\n  for (var n in r) if ({}.hasOwnProperty.call(r, n)) {\n    if (-1 !== e.indexOf(n)) continue;\n    t[n] = r[n];\n  }\n\n  return t;\n}\n\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n\n  return t;\n}\n\nfunction _objectSpread(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      _defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n\n  return e;\n}\n\nfunction _defineProperty(e, r, t) {\n  return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\n\nfunction _toPropertyKey(t) {\n  var i = _toPrimitive(t, \"string\");\n\n  return \"symbol\" == typeof i ? i : i + \"\";\n}\n\nfunction _toPrimitive(t, r) {\n  if (\"object\" != typeof t || !t) return t;\n  var e = t[Symbol.toPrimitive];\n\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != typeof i) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n\n  return (\"string\" === r ? String : Number)(t);\n}\n\nimport * as React from 'react';\nimport { useCallback, useMemo, useRef, useState } from 'react';\nimport omit from 'es-toolkit/compat/omit';\nimport { clsx } from 'clsx';\nimport { selectActiveIndex } from '../state/selectors/selectors';\nimport { useAppSelector } from '../state/hooks';\nimport { Layer } from '../container/Layer';\nimport { CartesianLabelListContextProvider, LabelListFromLabelProp } from '../component/LabelList';\nimport { getPercentValue, interpolate } from '../util/DataUtils';\nimport { getValueByDataKey } from '../util/ChartUtils';\nimport { adaptEventsOfChild } from '../util/types';\nimport { FunnelTrapezoid } from '../util/FunnelUtils';\nimport { useMouseClickItemDispatch, useMouseEnterItemDispatch, useMouseLeaveItemDispatch } from '../context/tooltipContext';\nimport { SetTooltipEntrySettings } from '../state/SetTooltipEntrySettings';\nimport { selectFunnelTrapezoids } from '../state/selectors/funnelSelectors';\nimport { findAllByType } from '../util/ReactUtils';\nimport { Cell } from '../component/Cell';\nimport { resolveDefaultProps } from '../util/resolveDefaultProps';\nimport { usePlotArea } from '../hooks';\nimport { svgPropertiesNoEvents } from '../util/svgPropertiesNoEvents';\nimport { JavascriptAnimate } from '../animation/JavascriptAnimate';\nimport { useAnimationId } from '../util/useAnimationId';\nimport { RegisterGraphicalItemId } from '../context/RegisterGraphicalItemId';\n/**\n * Internal props, combination of external props + defaultProps + private Recharts state\n */\n\n/**\n * External props, intended for end users to fill in\n */\n\nvar SetFunnelTooltipEntrySettings = /*#__PURE__*/React.memo(_ref => {\n  var {\n    dataKey,\n    nameKey,\n    stroke,\n    strokeWidth,\n    fill,\n    name,\n    hide,\n    tooltipType,\n    data,\n    trapezoids,\n    id\n  } = _ref;\n  var tooltipEntrySettings = {\n    dataDefinedOnItem: data,\n    getPosition: index => {\n      var _trapezoids$Number;\n\n      return (_trapezoids$Number = trapezoids[Number(index)]) === null || _trapezoids$Number === void 0 ? void 0 : _trapezoids$Number.tooltipPosition;\n    },\n    settings: {\n      stroke,\n      strokeWidth,\n      fill,\n      dataKey,\n      name,\n      nameKey,\n      hide,\n      type: tooltipType,\n      color: fill,\n      unit: '',\n      // Funnel does not have unit, why?\n      graphicalItemId: id\n    }\n  };\n  return /*#__PURE__*/React.createElement(SetTooltipEntrySettings, {\n    tooltipEntrySettings: tooltipEntrySettings\n  });\n});\n\nfunction FunnelLabelListProvider(_ref2) {\n  var {\n    showLabels,\n    trapezoids,\n    children\n  } = _ref2;\n  var labelListEntries = useMemo(() => {\n    if (!showLabels) {\n      return undefined;\n    }\n\n    return trapezoids === null || trapezoids === void 0 ? void 0 : trapezoids.map(entry => {\n      var viewBox = entry.labelViewBox;\n      return _objectSpread(_objectSpread({}, viewBox), {}, {\n        value: entry.name,\n        payload: entry.payload,\n        parentViewBox: entry.parentViewBox,\n        viewBox,\n        fill: entry.fill\n      });\n    });\n  }, [showLabels, trapezoids]);\n  return /*#__PURE__*/React.createElement(CartesianLabelListContextProvider, {\n    value: labelListEntries\n  }, children);\n}\n\nfunction FunnelTrapezoids(props) {\n  var {\n    trapezoids,\n    allOtherFunnelProps\n  } = props;\n  var activeItemIndex = useAppSelector(state => selectActiveIndex(state, 'item', state.tooltip.settings.trigger, undefined));\n\n  var {\n    onMouseEnter: onMouseEnterFromProps,\n    onClick: onItemClickFromProps,\n    onMouseLeave: onMouseLeaveFromProps,\n    shape,\n    activeShape\n  } = allOtherFunnelProps,\n      restOfAllOtherProps = _objectWithoutProperties(allOtherFunnelProps, _excluded);\n\n  var onMouseEnterFromContext = useMouseEnterItemDispatch(onMouseEnterFromProps, allOtherFunnelProps.dataKey, allOtherFunnelProps.id);\n  var onMouseLeaveFromContext = useMouseLeaveItemDispatch(onMouseLeaveFromProps);\n  var onClickFromContext = useMouseClickItemDispatch(onItemClickFromProps, allOtherFunnelProps.dataKey, allOtherFunnelProps.id);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, trapezoids.map((entry, i) => {\n    var isActiveIndex = Boolean(activeShape) && activeItemIndex === String(i);\n    var trapezoidOptions = isActiveIndex ? activeShape : shape;\n\n    var _entry$option$isActiv = _objectSpread(_objectSpread({}, entry), {}, {\n      option: trapezoidOptions,\n      isActive: isActiveIndex,\n      stroke: entry.stroke\n    }),\n        {\n      id\n    } = _entry$option$isActiv,\n        trapezoidProps = _objectWithoutProperties(_entry$option$isActiv, _excluded2);\n\n    return /*#__PURE__*/React.createElement(Layer, _extends({\n      key: \"trapezoid-\".concat(entry === null || entry === void 0 ? void 0 : entry.x, \"-\").concat(entry === null || entry === void 0 ? void 0 : entry.y, \"-\").concat(entry === null || entry === void 0 ? void 0 : entry.name, \"-\").concat(entry === null || entry === void 0 ? void 0 : entry.value),\n      className: \"recharts-funnel-trapezoid\"\n    }, adaptEventsOfChild(restOfAllOtherProps, entry, i), {\n      // @ts-expect-error the types need a bit of attention\n      onMouseEnter: onMouseEnterFromContext(entry, i) // @ts-expect-error the types need a bit of attention\n      ,\n      onMouseLeave: onMouseLeaveFromContext(entry, i) // @ts-expect-error the types need a bit of attention\n      ,\n      onClick: onClickFromContext(entry, i)\n    }), /*#__PURE__*/React.createElement(FunnelTrapezoid, trapezoidProps));\n  }));\n}\n\nfunction TrapezoidsWithAnimation(_ref3) {\n  var {\n    previousTrapezoidsRef,\n    props\n  } = _ref3;\n  var {\n    trapezoids,\n    isAnimationActive,\n    animationBegin,\n    animationDuration,\n    animationEasing,\n    onAnimationEnd,\n    onAnimationStart\n  } = props;\n  var prevTrapezoids = previousTrapezoidsRef.current;\n  var [isAnimating, setIsAnimating] = useState(false);\n  var showLabels = !isAnimating;\n  var animationId = useAnimationId(trapezoids, 'recharts-funnel-');\n  var handleAnimationEnd = useCallback(() => {\n    if (typeof onAnimationEnd === 'function') {\n      onAnimationEnd();\n    }\n\n    setIsAnimating(false);\n  }, [onAnimationEnd]);\n  var handleAnimationStart = useCallback(() => {\n    if (typeof onAnimationStart === 'function') {\n      onAnimationStart();\n    }\n\n    setIsAnimating(true);\n  }, [onAnimationStart]);\n  return /*#__PURE__*/React.createElement(FunnelLabelListProvider, {\n    showLabels: showLabels,\n    trapezoids: trapezoids\n  }, /*#__PURE__*/React.createElement(JavascriptAnimate, {\n    animationId: animationId,\n    begin: animationBegin,\n    duration: animationDuration,\n    isActive: isAnimationActive,\n    easing: animationEasing,\n    key: animationId,\n    onAnimationStart: handleAnimationStart,\n    onAnimationEnd: handleAnimationEnd\n  }, t => {\n    var stepData = t === 1 ? trapezoids : trapezoids.map((entry, index) => {\n      var prev = prevTrapezoids && prevTrapezoids[index];\n\n      if (prev) {\n        return _objectSpread(_objectSpread({}, entry), {}, {\n          x: interpolate(prev.x, entry.x, t),\n          y: interpolate(prev.y, entry.y, t),\n          upperWidth: interpolate(prev.upperWidth, entry.upperWidth, t),\n          lowerWidth: interpolate(prev.lowerWidth, entry.lowerWidth, t),\n          height: interpolate(prev.height, entry.height, t)\n        });\n      }\n\n      return _objectSpread(_objectSpread({}, entry), {}, {\n        x: interpolate(entry.x + entry.upperWidth / 2, entry.x, t),\n        y: interpolate(entry.y + entry.height / 2, entry.y, t),\n        upperWidth: interpolate(0, entry.upperWidth, t),\n        lowerWidth: interpolate(0, entry.lowerWidth, t),\n        height: interpolate(0, entry.height, t)\n      });\n    });\n\n    if (t > 0) {\n      // eslint-disable-next-line no-param-reassign\n      previousTrapezoidsRef.current = stepData;\n    }\n\n    return /*#__PURE__*/React.createElement(Layer, null, /*#__PURE__*/React.createElement(FunnelTrapezoids, {\n      trapezoids: stepData,\n      allOtherFunnelProps: props\n    }));\n  }), /*#__PURE__*/React.createElement(LabelListFromLabelProp, {\n    label: props.label\n  }), props.children);\n}\n\nfunction RenderTrapezoids(props) {\n  var previousTrapezoidsRef = useRef(undefined);\n  return /*#__PURE__*/React.createElement(TrapezoidsWithAnimation, {\n    props: props,\n    previousTrapezoidsRef: previousTrapezoidsRef\n  });\n}\n\nvar getRealWidthHeight = (customWidth, offset) => {\n  var {\n    width,\n    height,\n    left,\n    top\n  } = offset;\n  var realWidth = getPercentValue(customWidth, width, width);\n  return {\n    realWidth,\n    realHeight: height,\n    offsetX: left,\n    offsetY: top\n  };\n};\n\nexport var defaultFunnelProps = {\n  animationBegin: 400,\n  animationDuration: 1500,\n  animationEasing: 'ease',\n  fill: '#808080',\n  hide: false,\n  isAnimationActive: 'auto',\n  lastShapeType: 'triangle',\n  legendType: 'rect',\n  nameKey: 'name',\n  reversed: false,\n  stroke: '#fff'\n};\n\nfunction FunnelImpl(props) {\n  var plotArea = usePlotArea();\n\n  var {\n    stroke,\n    fill,\n    legendType,\n    hide,\n    isAnimationActive,\n    animationBegin,\n    animationDuration,\n    animationEasing,\n    nameKey,\n    lastShapeType,\n    id\n  } = props,\n      everythingElse = _objectWithoutProperties(props, _excluded3);\n\n  var presentationProps = svgPropertiesNoEvents(props);\n  var cells = findAllByType(props.children, Cell);\n  var funnelSettings = useMemo(() => ({\n    dataKey: props.dataKey,\n    nameKey,\n    data: props.data,\n    tooltipType: props.tooltipType,\n    lastShapeType,\n    reversed: props.reversed,\n    customWidth: props.width,\n    cells,\n    presentationProps,\n    id\n  }), [props.dataKey, nameKey, props.data, props.tooltipType, lastShapeType, props.reversed, props.width, cells, presentationProps, id]);\n  var trapezoids = useAppSelector(state => selectFunnelTrapezoids(state, funnelSettings));\n\n  if (hide || !trapezoids || !trapezoids.length || !plotArea) {\n    return null;\n  }\n\n  var {\n    height,\n    width\n  } = plotArea;\n  var layerClass = clsx('recharts-trapezoids', props.className);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(SetFunnelTooltipEntrySettings, {\n    dataKey: props.dataKey,\n    nameKey: props.nameKey,\n    stroke: props.stroke,\n    strokeWidth: props.strokeWidth,\n    fill: props.fill,\n    name: props.name,\n    hide: props.hide,\n    tooltipType: props.tooltipType,\n    data: props.data,\n    trapezoids: trapezoids,\n    id: id\n  }), /*#__PURE__*/React.createElement(Layer, {\n    className: layerClass\n  }, /*#__PURE__*/React.createElement(RenderTrapezoids, _extends({}, everythingElse, {\n    id: id,\n    stroke: stroke,\n    fill: fill,\n    nameKey: nameKey,\n    lastShapeType: lastShapeType,\n    animationBegin: animationBegin,\n    animationDuration: animationDuration,\n    animationEasing: animationEasing,\n    isAnimationActive: isAnimationActive,\n    hide: hide,\n    legendType: legendType,\n    height: height,\n    width: width,\n    trapezoids: trapezoids\n  }))));\n}\n\nexport function computeFunnelTrapezoids(_ref4) {\n  var {\n    dataKey,\n    nameKey,\n    displayedData,\n    tooltipType,\n    lastShapeType,\n    reversed,\n    offset,\n    customWidth,\n    graphicalItemId\n  } = _ref4;\n  var {\n    realHeight,\n    realWidth,\n    offsetX,\n    offsetY\n  } = getRealWidthHeight(customWidth, offset);\n  var values = displayedData.map(entry => {\n    var val = getValueByDataKey(entry, dataKey, 0);\n    return typeof val === 'number' ? val : 0;\n  });\n  var maxValue = Math.max.apply(null, values);\n  var len = displayedData.length;\n  var rowHeight = realHeight / len;\n  var parentViewBox = {\n    x: offset.left,\n    y: offset.top,\n    width: offset.width,\n    height: offset.height\n  };\n  var trapezoids = displayedData.map((entry, i) => {\n    // @ts-expect-error getValueByDataKey does not validate the output type\n    var rawVal = getValueByDataKey(entry, dataKey, 0);\n    var name = String(getValueByDataKey(entry, nameKey, i));\n    var val = rawVal;\n    var nextVal;\n\n    if (i !== len - 1) {\n      var nextDataValue = getValueByDataKey(displayedData[i + 1], dataKey, 0);\n\n      if (typeof nextDataValue === 'number') {\n        nextVal = nextDataValue;\n      } else if (Array.isArray(nextDataValue)) {\n        var [first, second] = nextDataValue;\n\n        if (typeof first === 'number') {\n          val = first;\n        }\n\n        if (typeof second === 'number') {\n          nextVal = second;\n        }\n      }\n    } else if (rawVal instanceof Array && rawVal.length === 2) {\n      var [_first, _second] = rawVal;\n\n      if (typeof _first === 'number') {\n        val = _first;\n      }\n\n      if (typeof _second === 'number') {\n        nextVal = _second;\n      }\n    } else if (lastShapeType === 'rectangle') {\n      nextVal = val;\n    } else {\n      nextVal = 0;\n    } // @ts-expect-error this is a problem if we have ranged values because `val` can be an array\n\n\n    var x = (maxValue - val) * realWidth / (2 * maxValue) + offsetX;\n    var y = rowHeight * i + offsetY; // @ts-expect-error getValueByDataKey does not validate the output type\n\n    var upperWidth = val / maxValue * realWidth; // @ts-expect-error nextVal could be an array\n\n    var lowerWidth = nextVal / maxValue * realWidth;\n    var tooltipPayload = [{\n      name,\n      value: val,\n      payload: entry,\n      dataKey,\n      type: tooltipType,\n      graphicalItemId\n    }];\n    var tooltipPosition = {\n      x: x + upperWidth / 2,\n      y: y + rowHeight / 2\n    };\n    var trapezoidViewBox = {\n      x,\n      y,\n      upperWidth,\n      lowerWidth,\n      width: Math.max(upperWidth, lowerWidth),\n      height: rowHeight\n    };\n    return _objectSpread(_objectSpread(_objectSpread({}, trapezoidViewBox), {}, {\n      name,\n      val,\n      tooltipPayload,\n      tooltipPosition\n    }, entry != null && typeof entry === 'object' ? omit(entry, ['width']) : {}), {}, {\n      payload: entry,\n      parentViewBox,\n      labelViewBox: trapezoidViewBox\n    });\n  });\n\n  if (reversed) {\n    trapezoids = trapezoids.map((entry, index) => {\n      var reversedViewBox = {\n        x: entry.x - (entry.lowerWidth - entry.upperWidth) / 2,\n        y: entry.y - index * rowHeight + (len - 1 - index) * rowHeight,\n        upperWidth: entry.lowerWidth,\n        lowerWidth: entry.upperWidth,\n        width: Math.max(entry.lowerWidth, entry.upperWidth),\n        height: rowHeight\n      };\n      return _objectSpread(_objectSpread(_objectSpread({}, entry), reversedViewBox), {}, {\n        tooltipPosition: _objectSpread(_objectSpread({}, entry.tooltipPosition), {}, {\n          y: entry.y - index * rowHeight + (len - 1 - index) * rowHeight + rowHeight / 2\n        }),\n        labelViewBox: reversedViewBox\n      });\n    });\n  }\n\n  return trapezoids;\n}\n/**\n * @consumes CartesianViewBoxContext\n * @provides LabelListContext\n * @provides CellReader\n */\n\nexport function Funnel(outsideProps) {\n  var _resolveDefaultProps = resolveDefaultProps(outsideProps, defaultFunnelProps),\n      {\n    id: externalId\n  } = _resolveDefaultProps,\n      props = _objectWithoutProperties(_resolveDefaultProps, _excluded4);\n\n  return /*#__PURE__*/React.createElement(RegisterGraphicalItemId, {\n    id: externalId,\n    type: \"funnel\"\n  }, id => /*#__PURE__*/React.createElement(FunnelImpl, _extends({}, props, {\n    id: id\n  })));\n}\nFunnel.displayName = 'Funnel';","map":{"version":3,"names":["_excluded","_excluded2","_excluded3","_excluded4","_extends","Object","assign","bind","n","e","arguments","length","t","r","hasOwnProperty","call","apply","_objectWithoutProperties","o","i","_objectWithoutPropertiesLoose","getOwnPropertySymbols","indexOf","propertyIsEnumerable","ownKeys","keys","filter","getOwnPropertyDescriptor","enumerable","push","_objectSpread","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_toPropertyKey","value","configurable","writable","_toPrimitive","Symbol","toPrimitive","TypeError","String","Number","React","useCallback","useMemo","useRef","useState","omit","clsx","selectActiveIndex","useAppSelector","Layer","CartesianLabelListContextProvider","LabelListFromLabelProp","getPercentValue","interpolate","getValueByDataKey","adaptEventsOfChild","FunnelTrapezoid","useMouseClickItemDispatch","useMouseEnterItemDispatch","useMouseLeaveItemDispatch","SetTooltipEntrySettings","selectFunnelTrapezoids","findAllByType","Cell","resolveDefaultProps","usePlotArea","svgPropertiesNoEvents","JavascriptAnimate","useAnimationId","RegisterGraphicalItemId","SetFunnelTooltipEntrySettings","memo","_ref","dataKey","nameKey","stroke","strokeWidth","fill","name","hide","tooltipType","data","trapezoids","id","tooltipEntrySettings","dataDefinedOnItem","getPosition","index","_trapezoids$Number","tooltipPosition","settings","type","color","unit","graphicalItemId","createElement","FunnelLabelListProvider","_ref2","showLabels","children","labelListEntries","undefined","map","entry","viewBox","labelViewBox","payload","parentViewBox","FunnelTrapezoids","props","allOtherFunnelProps","activeItemIndex","state","tooltip","trigger","onMouseEnter","onMouseEnterFromProps","onClick","onItemClickFromProps","onMouseLeave","onMouseLeaveFromProps","shape","activeShape","restOfAllOtherProps","onMouseEnterFromContext","onMouseLeaveFromContext","onClickFromContext","Fragment","isActiveIndex","Boolean","trapezoidOptions","_entry$option$isActiv","option","isActive","trapezoidProps","key","concat","x","y","className","TrapezoidsWithAnimation","_ref3","previousTrapezoidsRef","isAnimationActive","animationBegin","animationDuration","animationEasing","onAnimationEnd","onAnimationStart","prevTrapezoids","current","isAnimating","setIsAnimating","animationId","handleAnimationEnd","handleAnimationStart","begin","duration","easing","stepData","prev","upperWidth","lowerWidth","height","label","RenderTrapezoids","getRealWidthHeight","customWidth","offset","width","left","top","realWidth","realHeight","offsetX","offsetY","defaultFunnelProps","lastShapeType","legendType","reversed","FunnelImpl","plotArea","everythingElse","presentationProps","cells","funnelSettings","layerClass","computeFunnelTrapezoids","_ref4","displayedData","values","val","maxValue","Math","max","len","rowHeight","rawVal","nextVal","nextDataValue","Array","isArray","first","second","_first","_second","tooltipPayload","trapezoidViewBox","reversedViewBox","Funnel","outsideProps","_resolveDefaultProps","externalId","displayName"],"sources":["C:/Users/HP/Desktop/react-projects/Project-weathe/Projekt/node_modules/recharts/es6/cartesian/Funnel.js"],"sourcesContent":["var _excluded = [\"onMouseEnter\", \"onClick\", \"onMouseLeave\", \"shape\", \"activeShape\"],\n  _excluded2 = [\"id\"],\n  _excluded3 = [\"stroke\", \"fill\", \"legendType\", \"hide\", \"isAnimationActive\", \"animationBegin\", \"animationDuration\", \"animationEasing\", \"nameKey\", \"lastShapeType\", \"id\"],\n  _excluded4 = [\"id\"];\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nfunction _objectWithoutProperties(e, t) { if (null == e) return {}; var o, r, i = _objectWithoutPropertiesLoose(e, t); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); for (r = 0; r < n.length; r++) o = n[r], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]); } return i; }\nfunction _objectWithoutPropertiesLoose(r, e) { if (null == r) return {}; var t = {}; for (var n in r) if ({}.hasOwnProperty.call(r, n)) { if (-1 !== e.indexOf(n)) continue; t[n] = r[n]; } return t; }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nimport * as React from 'react';\nimport { useCallback, useMemo, useRef, useState } from 'react';\nimport omit from 'es-toolkit/compat/omit';\nimport { clsx } from 'clsx';\nimport { selectActiveIndex } from '../state/selectors/selectors';\nimport { useAppSelector } from '../state/hooks';\nimport { Layer } from '../container/Layer';\nimport { CartesianLabelListContextProvider, LabelListFromLabelProp } from '../component/LabelList';\nimport { getPercentValue, interpolate } from '../util/DataUtils';\nimport { getValueByDataKey } from '../util/ChartUtils';\nimport { adaptEventsOfChild } from '../util/types';\nimport { FunnelTrapezoid } from '../util/FunnelUtils';\nimport { useMouseClickItemDispatch, useMouseEnterItemDispatch, useMouseLeaveItemDispatch } from '../context/tooltipContext';\nimport { SetTooltipEntrySettings } from '../state/SetTooltipEntrySettings';\nimport { selectFunnelTrapezoids } from '../state/selectors/funnelSelectors';\nimport { findAllByType } from '../util/ReactUtils';\nimport { Cell } from '../component/Cell';\nimport { resolveDefaultProps } from '../util/resolveDefaultProps';\nimport { usePlotArea } from '../hooks';\nimport { svgPropertiesNoEvents } from '../util/svgPropertiesNoEvents';\nimport { JavascriptAnimate } from '../animation/JavascriptAnimate';\nimport { useAnimationId } from '../util/useAnimationId';\nimport { RegisterGraphicalItemId } from '../context/RegisterGraphicalItemId';\n\n/**\n * Internal props, combination of external props + defaultProps + private Recharts state\n */\n\n/**\n * External props, intended for end users to fill in\n */\n\nvar SetFunnelTooltipEntrySettings = /*#__PURE__*/React.memo(_ref => {\n  var {\n    dataKey,\n    nameKey,\n    stroke,\n    strokeWidth,\n    fill,\n    name,\n    hide,\n    tooltipType,\n    data,\n    trapezoids,\n    id\n  } = _ref;\n  var tooltipEntrySettings = {\n    dataDefinedOnItem: data,\n    getPosition: index => {\n      var _trapezoids$Number;\n      return (_trapezoids$Number = trapezoids[Number(index)]) === null || _trapezoids$Number === void 0 ? void 0 : _trapezoids$Number.tooltipPosition;\n    },\n    settings: {\n      stroke,\n      strokeWidth,\n      fill,\n      dataKey,\n      name,\n      nameKey,\n      hide,\n      type: tooltipType,\n      color: fill,\n      unit: '',\n      // Funnel does not have unit, why?\n      graphicalItemId: id\n    }\n  };\n  return /*#__PURE__*/React.createElement(SetTooltipEntrySettings, {\n    tooltipEntrySettings: tooltipEntrySettings\n  });\n});\nfunction FunnelLabelListProvider(_ref2) {\n  var {\n    showLabels,\n    trapezoids,\n    children\n  } = _ref2;\n  var labelListEntries = useMemo(() => {\n    if (!showLabels) {\n      return undefined;\n    }\n    return trapezoids === null || trapezoids === void 0 ? void 0 : trapezoids.map(entry => {\n      var viewBox = entry.labelViewBox;\n      return _objectSpread(_objectSpread({}, viewBox), {}, {\n        value: entry.name,\n        payload: entry.payload,\n        parentViewBox: entry.parentViewBox,\n        viewBox,\n        fill: entry.fill\n      });\n    });\n  }, [showLabels, trapezoids]);\n  return /*#__PURE__*/React.createElement(CartesianLabelListContextProvider, {\n    value: labelListEntries\n  }, children);\n}\nfunction FunnelTrapezoids(props) {\n  var {\n    trapezoids,\n    allOtherFunnelProps\n  } = props;\n  var activeItemIndex = useAppSelector(state => selectActiveIndex(state, 'item', state.tooltip.settings.trigger, undefined));\n  var {\n      onMouseEnter: onMouseEnterFromProps,\n      onClick: onItemClickFromProps,\n      onMouseLeave: onMouseLeaveFromProps,\n      shape,\n      activeShape\n    } = allOtherFunnelProps,\n    restOfAllOtherProps = _objectWithoutProperties(allOtherFunnelProps, _excluded);\n  var onMouseEnterFromContext = useMouseEnterItemDispatch(onMouseEnterFromProps, allOtherFunnelProps.dataKey, allOtherFunnelProps.id);\n  var onMouseLeaveFromContext = useMouseLeaveItemDispatch(onMouseLeaveFromProps);\n  var onClickFromContext = useMouseClickItemDispatch(onItemClickFromProps, allOtherFunnelProps.dataKey, allOtherFunnelProps.id);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, trapezoids.map((entry, i) => {\n    var isActiveIndex = Boolean(activeShape) && activeItemIndex === String(i);\n    var trapezoidOptions = isActiveIndex ? activeShape : shape;\n    var _entry$option$isActiv = _objectSpread(_objectSpread({}, entry), {}, {\n        option: trapezoidOptions,\n        isActive: isActiveIndex,\n        stroke: entry.stroke\n      }),\n      {\n        id\n      } = _entry$option$isActiv,\n      trapezoidProps = _objectWithoutProperties(_entry$option$isActiv, _excluded2);\n    return /*#__PURE__*/React.createElement(Layer, _extends({\n      key: \"trapezoid-\".concat(entry === null || entry === void 0 ? void 0 : entry.x, \"-\").concat(entry === null || entry === void 0 ? void 0 : entry.y, \"-\").concat(entry === null || entry === void 0 ? void 0 : entry.name, \"-\").concat(entry === null || entry === void 0 ? void 0 : entry.value),\n      className: \"recharts-funnel-trapezoid\"\n    }, adaptEventsOfChild(restOfAllOtherProps, entry, i), {\n      // @ts-expect-error the types need a bit of attention\n      onMouseEnter: onMouseEnterFromContext(entry, i)\n      // @ts-expect-error the types need a bit of attention\n      ,\n      onMouseLeave: onMouseLeaveFromContext(entry, i)\n      // @ts-expect-error the types need a bit of attention\n      ,\n      onClick: onClickFromContext(entry, i)\n    }), /*#__PURE__*/React.createElement(FunnelTrapezoid, trapezoidProps));\n  }));\n}\nfunction TrapezoidsWithAnimation(_ref3) {\n  var {\n    previousTrapezoidsRef,\n    props\n  } = _ref3;\n  var {\n    trapezoids,\n    isAnimationActive,\n    animationBegin,\n    animationDuration,\n    animationEasing,\n    onAnimationEnd,\n    onAnimationStart\n  } = props;\n  var prevTrapezoids = previousTrapezoidsRef.current;\n  var [isAnimating, setIsAnimating] = useState(false);\n  var showLabels = !isAnimating;\n  var animationId = useAnimationId(trapezoids, 'recharts-funnel-');\n  var handleAnimationEnd = useCallback(() => {\n    if (typeof onAnimationEnd === 'function') {\n      onAnimationEnd();\n    }\n    setIsAnimating(false);\n  }, [onAnimationEnd]);\n  var handleAnimationStart = useCallback(() => {\n    if (typeof onAnimationStart === 'function') {\n      onAnimationStart();\n    }\n    setIsAnimating(true);\n  }, [onAnimationStart]);\n  return /*#__PURE__*/React.createElement(FunnelLabelListProvider, {\n    showLabels: showLabels,\n    trapezoids: trapezoids\n  }, /*#__PURE__*/React.createElement(JavascriptAnimate, {\n    animationId: animationId,\n    begin: animationBegin,\n    duration: animationDuration,\n    isActive: isAnimationActive,\n    easing: animationEasing,\n    key: animationId,\n    onAnimationStart: handleAnimationStart,\n    onAnimationEnd: handleAnimationEnd\n  }, t => {\n    var stepData = t === 1 ? trapezoids : trapezoids.map((entry, index) => {\n      var prev = prevTrapezoids && prevTrapezoids[index];\n      if (prev) {\n        return _objectSpread(_objectSpread({}, entry), {}, {\n          x: interpolate(prev.x, entry.x, t),\n          y: interpolate(prev.y, entry.y, t),\n          upperWidth: interpolate(prev.upperWidth, entry.upperWidth, t),\n          lowerWidth: interpolate(prev.lowerWidth, entry.lowerWidth, t),\n          height: interpolate(prev.height, entry.height, t)\n        });\n      }\n      return _objectSpread(_objectSpread({}, entry), {}, {\n        x: interpolate(entry.x + entry.upperWidth / 2, entry.x, t),\n        y: interpolate(entry.y + entry.height / 2, entry.y, t),\n        upperWidth: interpolate(0, entry.upperWidth, t),\n        lowerWidth: interpolate(0, entry.lowerWidth, t),\n        height: interpolate(0, entry.height, t)\n      });\n    });\n    if (t > 0) {\n      // eslint-disable-next-line no-param-reassign\n      previousTrapezoidsRef.current = stepData;\n    }\n    return /*#__PURE__*/React.createElement(Layer, null, /*#__PURE__*/React.createElement(FunnelTrapezoids, {\n      trapezoids: stepData,\n      allOtherFunnelProps: props\n    }));\n  }), /*#__PURE__*/React.createElement(LabelListFromLabelProp, {\n    label: props.label\n  }), props.children);\n}\nfunction RenderTrapezoids(props) {\n  var previousTrapezoidsRef = useRef(undefined);\n  return /*#__PURE__*/React.createElement(TrapezoidsWithAnimation, {\n    props: props,\n    previousTrapezoidsRef: previousTrapezoidsRef\n  });\n}\nvar getRealWidthHeight = (customWidth, offset) => {\n  var {\n    width,\n    height,\n    left,\n    top\n  } = offset;\n  var realWidth = getPercentValue(customWidth, width, width);\n  return {\n    realWidth,\n    realHeight: height,\n    offsetX: left,\n    offsetY: top\n  };\n};\nexport var defaultFunnelProps = {\n  animationBegin: 400,\n  animationDuration: 1500,\n  animationEasing: 'ease',\n  fill: '#808080',\n  hide: false,\n  isAnimationActive: 'auto',\n  lastShapeType: 'triangle',\n  legendType: 'rect',\n  nameKey: 'name',\n  reversed: false,\n  stroke: '#fff'\n};\nfunction FunnelImpl(props) {\n  var plotArea = usePlotArea();\n  var {\n      stroke,\n      fill,\n      legendType,\n      hide,\n      isAnimationActive,\n      animationBegin,\n      animationDuration,\n      animationEasing,\n      nameKey,\n      lastShapeType,\n      id\n    } = props,\n    everythingElse = _objectWithoutProperties(props, _excluded3);\n  var presentationProps = svgPropertiesNoEvents(props);\n  var cells = findAllByType(props.children, Cell);\n  var funnelSettings = useMemo(() => ({\n    dataKey: props.dataKey,\n    nameKey,\n    data: props.data,\n    tooltipType: props.tooltipType,\n    lastShapeType,\n    reversed: props.reversed,\n    customWidth: props.width,\n    cells,\n    presentationProps,\n    id\n  }), [props.dataKey, nameKey, props.data, props.tooltipType, lastShapeType, props.reversed, props.width, cells, presentationProps, id]);\n  var trapezoids = useAppSelector(state => selectFunnelTrapezoids(state, funnelSettings));\n  if (hide || !trapezoids || !trapezoids.length || !plotArea) {\n    return null;\n  }\n  var {\n    height,\n    width\n  } = plotArea;\n  var layerClass = clsx('recharts-trapezoids', props.className);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(SetFunnelTooltipEntrySettings, {\n    dataKey: props.dataKey,\n    nameKey: props.nameKey,\n    stroke: props.stroke,\n    strokeWidth: props.strokeWidth,\n    fill: props.fill,\n    name: props.name,\n    hide: props.hide,\n    tooltipType: props.tooltipType,\n    data: props.data,\n    trapezoids: trapezoids,\n    id: id\n  }), /*#__PURE__*/React.createElement(Layer, {\n    className: layerClass\n  }, /*#__PURE__*/React.createElement(RenderTrapezoids, _extends({}, everythingElse, {\n    id: id,\n    stroke: stroke,\n    fill: fill,\n    nameKey: nameKey,\n    lastShapeType: lastShapeType,\n    animationBegin: animationBegin,\n    animationDuration: animationDuration,\n    animationEasing: animationEasing,\n    isAnimationActive: isAnimationActive,\n    hide: hide,\n    legendType: legendType,\n    height: height,\n    width: width,\n    trapezoids: trapezoids\n  }))));\n}\nexport function computeFunnelTrapezoids(_ref4) {\n  var {\n    dataKey,\n    nameKey,\n    displayedData,\n    tooltipType,\n    lastShapeType,\n    reversed,\n    offset,\n    customWidth,\n    graphicalItemId\n  } = _ref4;\n  var {\n    realHeight,\n    realWidth,\n    offsetX,\n    offsetY\n  } = getRealWidthHeight(customWidth, offset);\n  var values = displayedData.map(entry => {\n    var val = getValueByDataKey(entry, dataKey, 0);\n    return typeof val === 'number' ? val : 0;\n  });\n  var maxValue = Math.max.apply(null, values);\n  var len = displayedData.length;\n  var rowHeight = realHeight / len;\n  var parentViewBox = {\n    x: offset.left,\n    y: offset.top,\n    width: offset.width,\n    height: offset.height\n  };\n  var trapezoids = displayedData.map((entry, i) => {\n    // @ts-expect-error getValueByDataKey does not validate the output type\n    var rawVal = getValueByDataKey(entry, dataKey, 0);\n    var name = String(getValueByDataKey(entry, nameKey, i));\n    var val = rawVal;\n    var nextVal;\n    if (i !== len - 1) {\n      var nextDataValue = getValueByDataKey(displayedData[i + 1], dataKey, 0);\n      if (typeof nextDataValue === 'number') {\n        nextVal = nextDataValue;\n      } else if (Array.isArray(nextDataValue)) {\n        var [first, second] = nextDataValue;\n        if (typeof first === 'number') {\n          val = first;\n        }\n        if (typeof second === 'number') {\n          nextVal = second;\n        }\n      }\n    } else if (rawVal instanceof Array && rawVal.length === 2) {\n      var [_first, _second] = rawVal;\n      if (typeof _first === 'number') {\n        val = _first;\n      }\n      if (typeof _second === 'number') {\n        nextVal = _second;\n      }\n    } else if (lastShapeType === 'rectangle') {\n      nextVal = val;\n    } else {\n      nextVal = 0;\n    }\n\n    // @ts-expect-error this is a problem if we have ranged values because `val` can be an array\n    var x = (maxValue - val) * realWidth / (2 * maxValue) + offsetX;\n    var y = rowHeight * i + offsetY;\n    // @ts-expect-error getValueByDataKey does not validate the output type\n    var upperWidth = val / maxValue * realWidth;\n    // @ts-expect-error nextVal could be an array\n    var lowerWidth = nextVal / maxValue * realWidth;\n    var tooltipPayload = [{\n      name,\n      value: val,\n      payload: entry,\n      dataKey,\n      type: tooltipType,\n      graphicalItemId\n    }];\n    var tooltipPosition = {\n      x: x + upperWidth / 2,\n      y: y + rowHeight / 2\n    };\n    var trapezoidViewBox = {\n      x,\n      y,\n      upperWidth,\n      lowerWidth,\n      width: Math.max(upperWidth, lowerWidth),\n      height: rowHeight\n    };\n    return _objectSpread(_objectSpread(_objectSpread({}, trapezoidViewBox), {}, {\n      name,\n      val,\n      tooltipPayload,\n      tooltipPosition\n    }, entry != null && typeof entry === 'object' ? omit(entry, ['width']) : {}), {}, {\n      payload: entry,\n      parentViewBox,\n      labelViewBox: trapezoidViewBox\n    });\n  });\n  if (reversed) {\n    trapezoids = trapezoids.map((entry, index) => {\n      var reversedViewBox = {\n        x: entry.x - (entry.lowerWidth - entry.upperWidth) / 2,\n        y: entry.y - index * rowHeight + (len - 1 - index) * rowHeight,\n        upperWidth: entry.lowerWidth,\n        lowerWidth: entry.upperWidth,\n        width: Math.max(entry.lowerWidth, entry.upperWidth),\n        height: rowHeight\n      };\n      return _objectSpread(_objectSpread(_objectSpread({}, entry), reversedViewBox), {}, {\n        tooltipPosition: _objectSpread(_objectSpread({}, entry.tooltipPosition), {}, {\n          y: entry.y - index * rowHeight + (len - 1 - index) * rowHeight + rowHeight / 2\n        }),\n        labelViewBox: reversedViewBox\n      });\n    });\n  }\n  return trapezoids;\n}\n\n/**\n * @consumes CartesianViewBoxContext\n * @provides LabelListContext\n * @provides CellReader\n */\nexport function Funnel(outsideProps) {\n  var _resolveDefaultProps = resolveDefaultProps(outsideProps, defaultFunnelProps),\n    {\n      id: externalId\n    } = _resolveDefaultProps,\n    props = _objectWithoutProperties(_resolveDefaultProps, _excluded4);\n  return /*#__PURE__*/React.createElement(RegisterGraphicalItemId, {\n    id: externalId,\n    type: \"funnel\"\n  }, id => /*#__PURE__*/React.createElement(FunnelImpl, _extends({}, props, {\n    id: id\n  })));\n}\nFunnel.displayName = 'Funnel';"],"mappings":"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"},"metadata":{},"sourceType":"module"}