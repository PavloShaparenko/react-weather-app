{"ast":null,"code":"var _excluded = [\"sourceX\", \"sourceY\", \"sourceControlX\", \"targetX\", \"targetY\", \"targetControlX\", \"linkWidth\"],\n    _excluded2 = [\"className\", \"style\", \"children\", \"id\"];\n\nfunction _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n\n    return n;\n  }, _extends.apply(null, arguments);\n}\n\nfunction _objectWithoutProperties(e, t) {\n  if (null == e) return {};\n\n  var o,\n      r,\n      i = _objectWithoutPropertiesLoose(e, t);\n\n  if (Object.getOwnPropertySymbols) {\n    var n = Object.getOwnPropertySymbols(e);\n\n    for (r = 0; r < n.length; r++) o = n[r], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]);\n  }\n\n  return i;\n}\n\nfunction _objectWithoutPropertiesLoose(r, e) {\n  if (null == r) return {};\n  var t = {};\n\n  for (var n in r) if ({}.hasOwnProperty.call(r, n)) {\n    if (-1 !== e.indexOf(n)) continue;\n    t[n] = r[n];\n  }\n\n  return t;\n}\n\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n\n  return t;\n}\n\nfunction _objectSpread(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      _defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n\n  return e;\n}\n\nfunction _defineProperty(e, r, t) {\n  return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\n\nfunction _toPropertyKey(t) {\n  var i = _toPrimitive(t, \"string\");\n\n  return \"symbol\" == typeof i ? i : i + \"\";\n}\n\nfunction _toPrimitive(t, r) {\n  if (\"object\" != typeof t || !t) return t;\n  var e = t[Symbol.toPrimitive];\n\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != typeof i) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n\n  return (\"string\" === r ? String : Number)(t);\n}\n\nimport * as React from 'react';\nimport { useCallback, useMemo, useState } from 'react';\nimport maxBy from 'es-toolkit/compat/maxBy';\nimport sumBy from 'es-toolkit/compat/sumBy';\nimport get from 'es-toolkit/compat/get';\nimport { Surface } from '../container/Surface';\nimport { Layer } from '../container/Layer';\nimport { Rectangle } from '../shape/Rectangle';\nimport { getValueByDataKey } from '../util/ChartUtils';\nimport { ReportChartMargin, ReportChartSize, useChartHeight, useChartWidth } from '../context/chartLayoutContext';\nimport { TooltipPortalContext } from '../context/tooltipPortalContext';\nimport { RechartsWrapper } from './RechartsWrapper';\nimport { RechartsStoreProvider } from '../state/RechartsStoreProvider';\nimport { useAppDispatch } from '../state/hooks';\nimport { mouseLeaveItem, setActiveClickItemIndex, setActiveMouseOverItemIndex } from '../state/tooltipSlice';\nimport { SetTooltipEntrySettings } from '../state/SetTooltipEntrySettings';\nimport { SetComputedData } from '../context/chartDataContext';\nimport { svgPropertiesNoEvents, svgPropertiesNoEventsFromUnknown } from '../util/svgPropertiesNoEvents';\nimport { resolveDefaultProps } from '../util/resolveDefaultProps';\nimport { isPositiveNumber } from '../util/isWellBehavedNumber';\nimport { isNotNil, noop } from '../util/DataUtils';\nimport { RegisterGraphicalItemId } from '../context/RegisterGraphicalItemId';\n\nvar interpolationGenerator = (a, b) => {\n  var ka = +a;\n  var kb = b - ka;\n  return t => ka + kb * t;\n};\n\nvar centerY = node => node.y + node.dy / 2; // TODO why is this not reading dataKey?\n\n\nvar getValue = entry => entry && entry.value || 0;\n\nvar getSumOfIds = (links, ids) => ids.reduce((result, id) => result + getValue(links[id]), 0);\n\nvar getSumWithWeightedSource = (tree, links, ids) => ids.reduce((result, id) => {\n  var link = links[id];\n\n  if (link == null) {\n    return result;\n  }\n\n  var sourceNode = tree[link.source];\n\n  if (sourceNode == null) {\n    return result;\n  }\n\n  return result + centerY(sourceNode) * getValue(links[id]);\n}, 0);\n\nvar getSumWithWeightedTarget = (tree, links, ids) => ids.reduce((result, id) => {\n  var link = links[id];\n\n  if (link == null) {\n    return result;\n  }\n\n  var targetNode = tree[link.target];\n\n  if (targetNode == null) {\n    return result;\n  }\n\n  return result + centerY(targetNode) * getValue(links[id]);\n}, 0);\n\nvar ascendingY = (a, b) => a.y - b.y;\n\nvar searchTargetsAndSources = (links, id) => {\n  var sourceNodes = [];\n  var sourceLinks = [];\n  var targetNodes = [];\n  var targetLinks = [];\n\n  for (var i = 0, len = links.length; i < len; i++) {\n    var link = links[i];\n\n    if ((link === null || link === void 0 ? void 0 : link.source) === id) {\n      targetNodes.push(link.target);\n      targetLinks.push(i);\n    }\n\n    if ((link === null || link === void 0 ? void 0 : link.target) === id) {\n      sourceNodes.push(link.source);\n      sourceLinks.push(i);\n    }\n  }\n\n  return {\n    sourceNodes,\n    sourceLinks,\n    targetLinks,\n    targetNodes\n  };\n};\n\nvar updateDepthOfTargets = (tree, curNode) => {\n  var {\n    targetNodes\n  } = curNode;\n\n  for (var i = 0, len = targetNodes.length; i < len; i++) {\n    var targetNode = targetNodes[i];\n\n    if (targetNode == null) {\n      continue;\n    }\n\n    var target = tree[targetNode];\n\n    if (target) {\n      target.depth = Math.max(curNode.depth + 1, target.depth);\n      updateDepthOfTargets(tree, target);\n    }\n  }\n};\n\nvar getNodesTree = (_ref, width, nodeWidth, align) => {\n  var _maxBy$depth, _maxBy;\n\n  var {\n    nodes,\n    links\n  } = _ref;\n  var tree = nodes.map((entry, index) => {\n    var result = searchTargetsAndSources(links, index);\n    return _objectSpread(_objectSpread(_objectSpread({}, entry), result), {}, {\n      value: Math.max(getSumOfIds(links, result.sourceLinks), getSumOfIds(links, result.targetLinks)),\n      depth: 0\n    });\n  });\n\n  for (var i = 0, len = tree.length; i < len; i++) {\n    var node = tree[i];\n\n    if (node != null && !node.sourceNodes.length) {\n      updateDepthOfTargets(tree, node);\n    }\n  }\n\n  var maxDepth = (_maxBy$depth = (_maxBy = maxBy(tree, entry => entry.depth)) === null || _maxBy === void 0 ? void 0 : _maxBy.depth) !== null && _maxBy$depth !== void 0 ? _maxBy$depth : 0;\n\n  if (maxDepth >= 1) {\n    var childWidth = (width - nodeWidth) / maxDepth;\n\n    for (var _i = 0, _len = tree.length; _i < _len; _i++) {\n      var _node = tree[_i];\n\n      if (_node == null) {\n        continue;\n      }\n\n      if (!_node.targetNodes.length) {\n        if (align === 'justify') {\n          _node.depth = maxDepth;\n        }\n      }\n\n      _node.x = _node.depth * childWidth;\n      _node.dx = nodeWidth;\n    }\n  }\n\n  return {\n    tree,\n    maxDepth\n  };\n};\n\nvar getDepthTree = tree => {\n  var result = [];\n\n  for (var i = 0, len = tree.length; i < len; i++) {\n    var _result$node$depth;\n\n    var node = tree[i];\n\n    if (node == null) {\n      continue;\n    }\n\n    if (!result[node.depth]) {\n      result[node.depth] = [];\n    }\n\n    (_result$node$depth = result[node.depth]) === null || _result$node$depth === void 0 || _result$node$depth.push(node);\n  }\n\n  return result;\n};\n\nvar updateYOfTree = (depthTree, height, nodePadding, links, verticalAlign) => {\n  var yRatio = Math.min(...depthTree.map(nodes => (height - (nodes.length - 1) * nodePadding) / sumBy(nodes, getValue)));\n\n  for (var d = 0, maxDepth = depthTree.length; d < maxDepth; d++) {\n    var nodes = depthTree[d];\n\n    if (nodes == null) {\n      continue;\n    }\n\n    if (verticalAlign === 'top') {\n      var currentY = 0;\n\n      for (var i = 0, len = nodes.length; i < len; i++) {\n        var node = nodes[i];\n\n        if (node == null) {\n          continue;\n        }\n\n        node.dy = node.value * yRatio;\n        node.y = currentY;\n        currentY += node.dy + nodePadding;\n      }\n    } else {\n      for (var _i2 = 0, _len2 = nodes.length; _i2 < _len2; _i2++) {\n        var _node2 = nodes[_i2];\n\n        if (_node2 == null) {\n          continue;\n        }\n\n        _node2.y = _i2;\n        _node2.dy = _node2.value * yRatio;\n      }\n    }\n  }\n\n  return links.map(link => _objectSpread(_objectSpread({}, link), {}, {\n    dy: getValue(link) * yRatio\n  }));\n};\n\nvar resolveCollisions = function resolveCollisions(depthTree, height, nodePadding) {\n  var sort = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n\n  for (var i = 0, len = depthTree.length; i < len; i++) {\n    var nodes = depthTree[i];\n\n    if (nodes == null) {\n      continue;\n    }\n\n    var n = nodes.length; // Sort by the value of y\n\n    if (sort) {\n      nodes.sort(ascendingY);\n    }\n\n    var y0 = 0;\n\n    for (var j = 0; j < n; j++) {\n      var node = nodes[j];\n\n      if (node == null) {\n        continue;\n      }\n\n      var dy = y0 - node.y;\n\n      if (dy > 0) {\n        node.y += dy;\n      }\n\n      y0 = node.y + node.dy + nodePadding;\n    }\n\n    y0 = height + nodePadding;\n\n    for (var _j = n - 1; _j >= 0; _j--) {\n      var _node3 = nodes[_j];\n\n      if (_node3 == null) {\n        continue;\n      }\n\n      var _dy = _node3.y + _node3.dy + nodePadding - y0;\n\n      if (_dy > 0) {\n        _node3.y -= _dy;\n        y0 = _node3.y;\n      } else {\n        break;\n      }\n    }\n  }\n};\n\nvar relaxLeftToRight = (tree, depthTree, links, alpha) => {\n  for (var i = 0, maxDepth = depthTree.length; i < maxDepth; i++) {\n    var nodes = depthTree[i];\n\n    if (nodes == null) {\n      continue;\n    }\n\n    for (var j = 0, len = nodes.length; j < len; j++) {\n      var node = nodes[j];\n\n      if (node == null) {\n        continue;\n      }\n\n      if (node.sourceLinks.length) {\n        var sourceSum = getSumOfIds(links, node.sourceLinks);\n        var weightedSum = getSumWithWeightedSource(tree, links, node.sourceLinks);\n        var y = weightedSum / sourceSum;\n        node.y += (y - centerY(node)) * alpha;\n      }\n    }\n  }\n};\n\nvar relaxRightToLeft = (tree, depthTree, links, alpha) => {\n  for (var i = depthTree.length - 1; i >= 0; i--) {\n    var nodes = depthTree[i];\n\n    if (nodes == null) {\n      continue;\n    }\n\n    for (var j = 0, len = nodes.length; j < len; j++) {\n      var node = nodes[j];\n\n      if (node == null) {\n        continue;\n      }\n\n      if (node.targetLinks.length) {\n        var targetSum = getSumOfIds(links, node.targetLinks);\n        var weightedSum = getSumWithWeightedTarget(tree, links, node.targetLinks);\n        var y = weightedSum / targetSum;\n        node.y += (y - centerY(node)) * alpha;\n      }\n    }\n  }\n};\n\nvar updateYOfLinks = (tree, links) => {\n  for (var i = 0, len = tree.length; i < len; i++) {\n    var node = tree[i];\n\n    if (node == null) {\n      continue;\n    }\n\n    var sy = 0;\n    var ty = 0;\n    node.targetLinks.sort((a, b) => {\n      var _links$a, _links$b, _tree$targetA, _tree$targetB;\n\n      var targetA = (_links$a = links[a]) === null || _links$a === void 0 ? void 0 : _links$a.target;\n      var targetB = (_links$b = links[b]) === null || _links$b === void 0 ? void 0 : _links$b.target;\n\n      if (targetA == null || targetB == null) {\n        return 0;\n      }\n\n      var yA = (_tree$targetA = tree[targetA]) === null || _tree$targetA === void 0 ? void 0 : _tree$targetA.y;\n      var yB = (_tree$targetB = tree[targetB]) === null || _tree$targetB === void 0 ? void 0 : _tree$targetB.y;\n\n      if (yA == null || yB == null) {\n        return 0;\n      }\n\n      return yA - yB;\n    });\n    node.sourceLinks.sort((a, b) => {\n      var _links$a2, _links$b2, _tree$sourceA, _tree$sourceB;\n\n      var sourceA = (_links$a2 = links[a]) === null || _links$a2 === void 0 ? void 0 : _links$a2.source;\n      var sourceB = (_links$b2 = links[b]) === null || _links$b2 === void 0 ? void 0 : _links$b2.source;\n\n      if (sourceA == null || sourceB == null) {\n        return 0;\n      }\n\n      var yA = (_tree$sourceA = tree[sourceA]) === null || _tree$sourceA === void 0 ? void 0 : _tree$sourceA.y;\n      var yB = (_tree$sourceB = tree[sourceB]) === null || _tree$sourceB === void 0 ? void 0 : _tree$sourceB.y;\n\n      if (yA == null || yB == null) {\n        return 0;\n      }\n\n      return yA - yB;\n    });\n\n    for (var j = 0, tLen = node.targetLinks.length; j < tLen; j++) {\n      var targetLink = node.targetLinks[j];\n\n      if (targetLink == null) {\n        continue;\n      }\n\n      var link = links[targetLink];\n\n      if (link) {\n        // @ts-expect-error we should refactor this to immutable\n        link.sy = sy;\n        sy += link.dy;\n      }\n    }\n\n    for (var _j2 = 0, sLen = node.sourceLinks.length; _j2 < sLen; _j2++) {\n      var sourceLink = node.sourceLinks[_j2];\n\n      if (sourceLink == null) {\n        continue;\n      }\n\n      var _link = links[sourceLink];\n\n      if (_link) {\n        // @ts-expect-error we should refactor this to immutable\n        _link.ty = ty;\n        ty += _link.dy;\n      }\n    }\n  }\n};\n\nvar computeData = _ref2 => {\n  var {\n    data,\n    width,\n    height,\n    iterations,\n    nodeWidth,\n    nodePadding,\n    sort,\n    verticalAlign,\n    align\n  } = _ref2;\n  var {\n    links\n  } = data;\n  var {\n    tree\n  } = getNodesTree(data, width, nodeWidth, align);\n  var depthTree = getDepthTree(tree);\n  var linksWithDy = updateYOfTree(depthTree, height, nodePadding, links, verticalAlign);\n  resolveCollisions(depthTree, height, nodePadding, sort);\n\n  if (verticalAlign === 'justify') {\n    var alpha = 1;\n\n    for (var i = 1; i <= iterations; i++) {\n      relaxRightToLeft(tree, depthTree, linksWithDy, alpha *= 0.99);\n      resolveCollisions(depthTree, height, nodePadding, sort);\n      relaxLeftToRight(tree, depthTree, linksWithDy, alpha);\n      resolveCollisions(depthTree, height, nodePadding, sort);\n    }\n  }\n\n  updateYOfLinks(tree, linksWithDy); // @ts-expect-error updateYOfLinks modifies the links array to add sy and ty in place\n\n  var newLinks = linksWithDy;\n  return {\n    nodes: tree,\n    links: newLinks\n  };\n};\n\nvar getNodeCoordinateOfTooltip = item => {\n  return {\n    x: +item.x + +item.width / 2,\n    y: +item.y + +item.height / 2\n  };\n};\n\nvar getLinkCoordinateOfTooltip = item => {\n  return 'sourceX' in item ? {\n    x: (item.sourceX + item.targetX) / 2,\n    y: (item.sourceY + item.targetY) / 2\n  } : undefined;\n};\n\nvar getPayloadOfTooltip = (item, type, nameKey) => {\n  var {\n    payload\n  } = item;\n\n  if (type === 'node') {\n    return {\n      payload,\n      name: getValueByDataKey(payload, nameKey, ''),\n      value: getValueByDataKey(payload, 'value')\n    };\n  }\n\n  if ('source' in payload && payload.source && payload.target) {\n    var sourceName = getValueByDataKey(payload.source, nameKey, '');\n    var targetName = getValueByDataKey(payload.target, nameKey, '');\n    return {\n      payload,\n      name: \"\".concat(sourceName, \" - \").concat(targetName),\n      value: getValueByDataKey(payload, 'value')\n    };\n  }\n\n  return undefined;\n};\n\nexport var sankeyPayloadSearcher = (_, activeIndex, computedData, nameKey) => {\n  if (activeIndex == null || typeof activeIndex !== 'string') {\n    return undefined;\n  }\n\n  if (computedData == null || typeof computedData !== 'object') {\n    return undefined;\n  }\n\n  var splitIndex = activeIndex.split('-');\n  var [targetType, index] = splitIndex;\n  var item = get(computedData, \"\".concat(targetType, \"s[\").concat(index, \"]\"));\n\n  if (item) {\n    var payload = getPayloadOfTooltip(item, targetType, nameKey);\n    return payload;\n  }\n\n  return undefined;\n};\nvar options = {\n  chartName: 'Sankey',\n  defaultTooltipEventType: 'item',\n  validateTooltipEventTypes: ['item'],\n  tooltipPayloadSearcher: sankeyPayloadSearcher,\n  eventEmitter: undefined\n};\nvar SetSankeyTooltipEntrySettings = /*#__PURE__*/React.memo(_ref3 => {\n  var {\n    dataKey,\n    nameKey,\n    stroke,\n    strokeWidth,\n    fill,\n    name,\n    data,\n    id\n  } = _ref3;\n  var tooltipEntrySettings = {\n    dataDefinedOnItem: data,\n    getPosition: noop,\n    settings: {\n      stroke,\n      strokeWidth,\n      fill,\n      dataKey,\n      name,\n      nameKey,\n      hide: false,\n      type: undefined,\n      color: fill,\n      unit: '',\n      graphicalItemId: id\n    }\n  };\n  return /*#__PURE__*/React.createElement(SetTooltipEntrySettings, {\n    tooltipEntrySettings: tooltipEntrySettings\n  });\n}); // TODO: improve types - NodeOptions uses SankeyNode, LinkOptions uses LinkProps. Standardize.\n\nfunction renderLinkItem(option, props) {\n  if ( /*#__PURE__*/React.isValidElement(option)) {\n    return /*#__PURE__*/React.cloneElement(option, props);\n  }\n\n  if (typeof option === 'function') {\n    return option(props);\n  }\n\n  var {\n    sourceX,\n    sourceY,\n    sourceControlX,\n    targetX,\n    targetY,\n    targetControlX,\n    linkWidth\n  } = props,\n      others = _objectWithoutProperties(props, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"path\", _extends({\n    className: \"recharts-sankey-link\",\n    d: \"\\n          M\".concat(sourceX, \",\").concat(sourceY, \"\\n          C\").concat(sourceControlX, \",\").concat(sourceY, \" \").concat(targetControlX, \",\").concat(targetY, \" \").concat(targetX, \",\").concat(targetY, \"\\n        \"),\n    fill: \"none\",\n    stroke: \"#333\",\n    strokeWidth: linkWidth,\n    strokeOpacity: \"0.2\"\n  }, svgPropertiesNoEvents(others)));\n}\n\nvar buildLinkProps = _ref4 => {\n  var {\n    link,\n    nodes,\n    left,\n    top,\n    i,\n    linkContent,\n    linkCurvature\n  } = _ref4;\n  var {\n    sy: sourceRelativeY,\n    ty: targetRelativeY,\n    dy: linkWidth\n  } = link;\n  var sourceNode = nodes[link.source];\n  var targetNode = nodes[link.target];\n\n  if (sourceNode == null || targetNode == null) {\n    return undefined;\n  }\n\n  var sourceX = sourceNode.x + sourceNode.dx + left;\n  var targetX = targetNode.x + left;\n  var interpolationFunc = interpolationGenerator(sourceX, targetX);\n  var sourceControlX = interpolationFunc(linkCurvature);\n  var targetControlX = interpolationFunc(1 - linkCurvature);\n  var sourceY = sourceNode.y + sourceRelativeY + linkWidth / 2 + top;\n  var targetY = targetNode.y + targetRelativeY + linkWidth / 2 + top;\n\n  var linkProps = _objectSpread({\n    sourceX,\n    // @ts-expect-error the linkContent from below is contributing unknown props\n    targetX,\n    sourceY,\n    // @ts-expect-error the linkContent from below is contributing unknown props\n    targetY,\n    sourceControlX,\n    targetControlX,\n    sourceRelativeY,\n    targetRelativeY,\n    linkWidth,\n    index: i,\n    payload: _objectSpread(_objectSpread({}, link), {}, {\n      source: sourceNode,\n      target: targetNode\n    })\n  }, svgPropertiesNoEventsFromUnknown(linkContent));\n\n  return linkProps;\n};\n\nfunction SankeyLinkElement(_ref5) {\n  var {\n    graphicalItemId,\n    props,\n    i,\n    linkContent,\n    onMouseEnter: _onMouseEnter,\n    onMouseLeave: _onMouseLeave,\n    onClick: _onClick,\n    dataKey\n  } = _ref5;\n  var activeCoordinate = getLinkCoordinateOfTooltip(props);\n  var activeIndex = \"link-\".concat(i);\n  var dispatch = useAppDispatch();\n  var events = {\n    onMouseEnter: e => {\n      dispatch(setActiveMouseOverItemIndex({\n        activeIndex,\n        activeDataKey: dataKey,\n        activeCoordinate,\n        activeGraphicalItemId: graphicalItemId\n      }));\n\n      _onMouseEnter(props, e);\n    },\n    onMouseLeave: e => {\n      dispatch(mouseLeaveItem());\n\n      _onMouseLeave(props, e);\n    },\n    onClick: e => {\n      dispatch(setActiveClickItemIndex({\n        activeIndex,\n        activeDataKey: dataKey,\n        activeCoordinate,\n        activeGraphicalItemId: graphicalItemId\n      }));\n\n      _onClick(props, e);\n    }\n  };\n  return /*#__PURE__*/React.createElement(Layer, events, renderLinkItem(linkContent, props));\n}\n\nfunction AllSankeyLinkElements(_ref6) {\n  var {\n    graphicalItemId,\n    modifiedLinks,\n    links,\n    linkContent,\n    onMouseEnter,\n    onMouseLeave,\n    onClick,\n    dataKey\n  } = _ref6;\n  return /*#__PURE__*/React.createElement(Layer, {\n    className: \"recharts-sankey-links\",\n    key: \"recharts-sankey-links\"\n  }, links.map((link, i) => {\n    var linkProps = modifiedLinks[i];\n\n    if (linkProps == null) {\n      return null;\n    }\n\n    return /*#__PURE__*/React.createElement(SankeyLinkElement, {\n      graphicalItemId: graphicalItemId,\n      key: \"link-\".concat(link.source, \"-\").concat(link.target, \"-\").concat(link.value),\n      props: linkProps,\n      linkContent: linkContent,\n      i: i,\n      onMouseEnter: onMouseEnter,\n      onMouseLeave: onMouseLeave,\n      onClick: onClick,\n      dataKey: dataKey\n    });\n  }));\n}\n\nfunction renderNodeItem(option, props) {\n  if ( /*#__PURE__*/React.isValidElement(option)) {\n    return /*#__PURE__*/React.cloneElement(option, props);\n  }\n\n  if (typeof option === 'function') {\n    return option(props);\n  }\n\n  return (\n    /*#__PURE__*/\n    // @ts-expect-error recharts radius is not compatible with SVG radius\n    React.createElement(Rectangle, _extends({\n      className: \"recharts-sankey-node\",\n      fill: \"#0088fe\",\n      fillOpacity: \"0.8\"\n    }, svgPropertiesNoEvents(props)))\n  );\n}\n\nvar buildNodeProps = _ref7 => {\n  var {\n    node,\n    nodeContent,\n    top,\n    left,\n    i\n  } = _ref7;\n  var {\n    x,\n    y,\n    dx,\n    dy\n  } = node; // @ts-expect-error nodeContent is passing in unknown props\n\n  var nodeProps = _objectSpread(_objectSpread({}, svgPropertiesNoEventsFromUnknown(nodeContent)), {}, {\n    x: x + left,\n    y: y + top,\n    width: dx,\n    height: dy,\n    index: i,\n    payload: node\n  });\n\n  return nodeProps;\n};\n\nfunction NodeElement(_ref8) {\n  var {\n    graphicalItemId,\n    props,\n    nodeContent,\n    i,\n    onMouseEnter: _onMouseEnter2,\n    onMouseLeave: _onMouseLeave2,\n    onClick: _onClick2,\n    dataKey\n  } = _ref8;\n  var dispatch = useAppDispatch();\n  var activeCoordinate = getNodeCoordinateOfTooltip(props);\n  var activeIndex = \"node-\".concat(i);\n  var events = {\n    onMouseEnter: e => {\n      dispatch(setActiveMouseOverItemIndex({\n        activeIndex,\n        activeDataKey: dataKey,\n        activeCoordinate,\n        activeGraphicalItemId: graphicalItemId\n      }));\n\n      _onMouseEnter2(props, e);\n    },\n    onMouseLeave: e => {\n      dispatch(mouseLeaveItem());\n\n      _onMouseLeave2(props, e);\n    },\n    onClick: e => {\n      dispatch(setActiveClickItemIndex({\n        activeIndex,\n        activeDataKey: dataKey,\n        activeCoordinate,\n        activeGraphicalItemId: graphicalItemId\n      }));\n\n      _onClick2(props, e);\n    }\n  };\n  return /*#__PURE__*/React.createElement(Layer, events, renderNodeItem(nodeContent, props));\n}\n\nfunction AllNodeElements(_ref9) {\n  var {\n    graphicalItemId,\n    modifiedNodes,\n    nodeContent,\n    onMouseEnter,\n    onMouseLeave,\n    onClick,\n    dataKey\n  } = _ref9;\n  return /*#__PURE__*/React.createElement(Layer, {\n    className: \"recharts-sankey-nodes\",\n    key: \"recharts-sankey-nodes\"\n  }, modifiedNodes.map((modifiedNode, i) => {\n    return /*#__PURE__*/React.createElement(NodeElement, {\n      graphicalItemId: graphicalItemId,\n      key: \"node-\".concat(modifiedNode.index, \"-\").concat(modifiedNode.x, \"-\").concat(modifiedNode.y),\n      props: modifiedNode,\n      nodeContent: nodeContent,\n      i: i,\n      onMouseEnter: onMouseEnter,\n      onMouseLeave: onMouseLeave,\n      onClick: onClick,\n      dataKey: dataKey\n    });\n  }));\n}\n\nexport var sankeyDefaultProps = {\n  align: 'justify',\n  dataKey: 'value',\n  iterations: 32,\n  linkCurvature: 0.5,\n  margin: {\n    top: 5,\n    right: 5,\n    bottom: 5,\n    left: 5\n  },\n  nameKey: 'name',\n  nodePadding: 10,\n  nodeWidth: 10,\n  sort: true,\n  verticalAlign: 'justify'\n};\n\nfunction SankeyImpl(props) {\n  var {\n    className,\n    style,\n    children,\n    id\n  } = props,\n      others = _objectWithoutProperties(props, _excluded2);\n\n  var {\n    link,\n    dataKey,\n    node,\n    onMouseEnter,\n    onMouseLeave,\n    onClick,\n    data,\n    iterations,\n    nodeWidth,\n    nodePadding,\n    sort,\n    linkCurvature,\n    margin,\n    verticalAlign,\n    align\n  } = props;\n  var attrs = svgPropertiesNoEvents(others);\n  var width = useChartWidth();\n  var height = useChartHeight();\n  var {\n    links,\n    modifiedLinks,\n    modifiedNodes\n  } = useMemo(() => {\n    var _margin$left, _margin$right, _margin$top, _margin$bottom;\n\n    if (!data || !width || !height || width <= 0 || height <= 0) {\n      return {\n        nodes: [],\n        links: [],\n        modifiedLinks: [],\n        modifiedNodes: []\n      };\n    }\n\n    var contentWidth = width - ((_margin$left = margin.left) !== null && _margin$left !== void 0 ? _margin$left : 0) - ((_margin$right = margin.right) !== null && _margin$right !== void 0 ? _margin$right : 0);\n    var contentHeight = height - ((_margin$top = margin.top) !== null && _margin$top !== void 0 ? _margin$top : 0) - ((_margin$bottom = margin.bottom) !== null && _margin$bottom !== void 0 ? _margin$bottom : 0);\n    var computed = computeData({\n      data,\n      width: contentWidth,\n      height: contentHeight,\n      iterations,\n      nodeWidth,\n      nodePadding,\n      sort,\n      verticalAlign,\n      align\n    });\n    var top = margin.top || 0;\n    var left = margin.left || 0;\n    var newModifiedLinks = computed.links.map((l, i) => {\n      return buildLinkProps({\n        link: l,\n        nodes: computed.nodes,\n        i,\n        top,\n        left,\n        linkContent: link,\n        linkCurvature\n      });\n    }).filter(isNotNil);\n    var newModifiedNodes = computed.nodes.map((n, i) => {\n      return buildNodeProps({\n        node: n,\n        nodeContent: node,\n        i,\n        top,\n        left\n      });\n    });\n    return {\n      nodes: computed.nodes,\n      links: computed.links,\n      modifiedLinks: newModifiedLinks,\n      modifiedNodes: newModifiedNodes\n    };\n  }, [data, width, height, margin, iterations, nodeWidth, nodePadding, sort, link, node, linkCurvature, align, verticalAlign]);\n  var handleMouseEnter = useCallback((item, type, e) => {\n    if (onMouseEnter) {\n      onMouseEnter(item, type, e);\n    }\n  }, [onMouseEnter]);\n  var handleMouseLeave = useCallback((item, type, e) => {\n    if (onMouseLeave) {\n      onMouseLeave(item, type, e);\n    }\n  }, [onMouseLeave]);\n  var handleClick = useCallback((item, type, e) => {\n    if (onClick) {\n      onClick(item, type, e);\n    }\n  }, [onClick]);\n\n  if (!isPositiveNumber(width) || !isPositiveNumber(height) || !data || !data.links || !data.nodes) {\n    return null;\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(SetComputedData, {\n    computedData: {\n      links: modifiedLinks,\n      nodes: modifiedNodes\n    }\n  }), /*#__PURE__*/React.createElement(Surface, _extends({}, attrs, {\n    width: width,\n    height: height\n  }), children, /*#__PURE__*/React.createElement(AllSankeyLinkElements, {\n    graphicalItemId: id,\n    links: links,\n    modifiedLinks: modifiedLinks,\n    linkContent: link,\n    dataKey: dataKey,\n    onMouseEnter: (linkProps, e) => handleMouseEnter(linkProps, 'link', e),\n    onMouseLeave: (linkProps, e) => handleMouseLeave(linkProps, 'link', e),\n    onClick: (linkProps, e) => handleClick(linkProps, 'link', e)\n  }), /*#__PURE__*/React.createElement(AllNodeElements, {\n    graphicalItemId: id,\n    modifiedNodes: modifiedNodes,\n    nodeContent: node,\n    dataKey: dataKey,\n    onMouseEnter: (nodeProps, e) => handleMouseEnter(nodeProps, 'node', e),\n    onMouseLeave: (nodeProps, e) => handleMouseLeave(nodeProps, 'node', e),\n    onClick: (nodeProps, e) => handleClick(nodeProps, 'node', e)\n  })));\n}\n/**\n * Flow diagram in which the width of the arrows is proportional to the flow rate.\n * It is typically used to visualize energy or material or cost transfers between processes.\n *\n * @consumes ResponsiveContainerContext\n * @provides TooltipEntrySettings\n */\n\n\nexport function Sankey(outsideProps) {\n  var props = resolveDefaultProps(outsideProps, sankeyDefaultProps);\n  var {\n    width,\n    height,\n    style,\n    className,\n    id: externalId\n  } = props;\n  var [tooltipPortal, setTooltipPortal] = useState(null);\n  return /*#__PURE__*/React.createElement(RechartsStoreProvider, {\n    preloadedState: {\n      options\n    },\n    reduxStoreName: className !== null && className !== void 0 ? className : 'Sankey'\n  }, /*#__PURE__*/React.createElement(ReportChartSize, {\n    width: width,\n    height: height\n  }), /*#__PURE__*/React.createElement(ReportChartMargin, {\n    margin: props.margin\n  }), /*#__PURE__*/React.createElement(RechartsWrapper, {\n    className: className,\n    style: style,\n    width: width,\n    height: height\n    /*\n     * Sankey, same as Treemap, suffers from overfilling the container\n     * and causing infinite render loops where the chart keeps growing.\n     */\n    ,\n    responsive: false,\n    ref: node => {\n      if (node && !tooltipPortal) {\n        setTooltipPortal(node);\n      }\n    },\n    onMouseEnter: undefined,\n    onMouseLeave: undefined,\n    onClick: undefined,\n    onMouseMove: undefined,\n    onMouseDown: undefined,\n    onMouseUp: undefined,\n    onContextMenu: undefined,\n    onDoubleClick: undefined,\n    onTouchStart: undefined,\n    onTouchMove: undefined,\n    onTouchEnd: undefined\n  }, /*#__PURE__*/React.createElement(TooltipPortalContext.Provider, {\n    value: tooltipPortal\n  }, /*#__PURE__*/React.createElement(RegisterGraphicalItemId, {\n    id: externalId,\n    type: \"sankey\"\n  }, id => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(SetSankeyTooltipEntrySettings, {\n    dataKey: props.dataKey,\n    nameKey: props.nameKey,\n    stroke: props.stroke,\n    strokeWidth: props.strokeWidth,\n    fill: props.fill,\n    name: props.name,\n    data: props.data,\n    id: id\n  }), /*#__PURE__*/React.createElement(SankeyImpl, _extends({}, props, {\n    id: id\n  })))))));\n}\nSankey.displayName = 'Sankey';","map":{"version":3,"names":["_excluded","_excluded2","_extends","Object","assign","bind","n","e","arguments","length","t","r","hasOwnProperty","call","apply","_objectWithoutProperties","o","i","_objectWithoutPropertiesLoose","getOwnPropertySymbols","indexOf","propertyIsEnumerable","ownKeys","keys","filter","getOwnPropertyDescriptor","enumerable","push","_objectSpread","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_toPropertyKey","value","configurable","writable","_toPrimitive","Symbol","toPrimitive","TypeError","String","Number","React","useCallback","useMemo","useState","maxBy","sumBy","get","Surface","Layer","Rectangle","getValueByDataKey","ReportChartMargin","ReportChartSize","useChartHeight","useChartWidth","TooltipPortalContext","RechartsWrapper","RechartsStoreProvider","useAppDispatch","mouseLeaveItem","setActiveClickItemIndex","setActiveMouseOverItemIndex","SetTooltipEntrySettings","SetComputedData","svgPropertiesNoEvents","svgPropertiesNoEventsFromUnknown","resolveDefaultProps","isPositiveNumber","isNotNil","noop","RegisterGraphicalItemId","interpolationGenerator","a","b","ka","kb","centerY","node","y","dy","getValue","entry","getSumOfIds","links","ids","reduce","result","id","getSumWithWeightedSource","tree","link","sourceNode","source","getSumWithWeightedTarget","targetNode","target","ascendingY","searchTargetsAndSources","sourceNodes","sourceLinks","targetNodes","targetLinks","len","updateDepthOfTargets","curNode","depth","Math","max","getNodesTree","_ref","width","nodeWidth","align","_maxBy$depth","_maxBy","nodes","map","index","maxDepth","childWidth","_i","_len","_node","x","dx","getDepthTree","_result$node$depth","updateYOfTree","depthTree","height","nodePadding","verticalAlign","yRatio","min","d","currentY","_i2","_len2","_node2","resolveCollisions","sort","undefined","y0","j","_j","_node3","_dy","relaxLeftToRight","alpha","sourceSum","weightedSum","relaxRightToLeft","targetSum","updateYOfLinks","sy","ty","_links$a","_links$b","_tree$targetA","_tree$targetB","targetA","targetB","yA","yB","_links$a2","_links$b2","_tree$sourceA","_tree$sourceB","sourceA","sourceB","tLen","targetLink","_j2","sLen","sourceLink","_link","computeData","_ref2","data","iterations","linksWithDy","newLinks","getNodeCoordinateOfTooltip","item","getLinkCoordinateOfTooltip","sourceX","targetX","sourceY","targetY","getPayloadOfTooltip","type","nameKey","payload","name","sourceName","targetName","concat","sankeyPayloadSearcher","_","activeIndex","computedData","splitIndex","split","targetType","options","chartName","defaultTooltipEventType","validateTooltipEventTypes","tooltipPayloadSearcher","eventEmitter","SetSankeyTooltipEntrySettings","memo","_ref3","dataKey","stroke","strokeWidth","fill","tooltipEntrySettings","dataDefinedOnItem","getPosition","settings","hide","color","unit","graphicalItemId","createElement","renderLinkItem","option","props","isValidElement","cloneElement","sourceControlX","targetControlX","linkWidth","others","className","strokeOpacity","buildLinkProps","_ref4","left","top","linkContent","linkCurvature","sourceRelativeY","targetRelativeY","interpolationFunc","linkProps","SankeyLinkElement","_ref5","onMouseEnter","_onMouseEnter","onMouseLeave","_onMouseLeave","onClick","_onClick","activeCoordinate","dispatch","events","activeDataKey","activeGraphicalItemId","AllSankeyLinkElements","_ref6","modifiedLinks","key","renderNodeItem","fillOpacity","buildNodeProps","_ref7","nodeContent","nodeProps","NodeElement","_ref8","_onMouseEnter2","_onMouseLeave2","_onClick2","AllNodeElements","_ref9","modifiedNodes","modifiedNode","sankeyDefaultProps","margin","right","bottom","SankeyImpl","style","children","attrs","_margin$left","_margin$right","_margin$top","_margin$bottom","contentWidth","contentHeight","computed","newModifiedLinks","l","newModifiedNodes","handleMouseEnter","handleMouseLeave","handleClick","Fragment","Sankey","outsideProps","externalId","tooltipPortal","setTooltipPortal","preloadedState","reduxStoreName","responsive","ref","onMouseMove","onMouseDown","onMouseUp","onContextMenu","onDoubleClick","onTouchStart","onTouchMove","onTouchEnd","Provider","displayName"],"sources":["C:/Users/HP/Desktop/react-projects/Project-weathe/Projekt/node_modules/recharts/es6/chart/Sankey.js"],"sourcesContent":["var _excluded = [\"sourceX\", \"sourceY\", \"sourceControlX\", \"targetX\", \"targetY\", \"targetControlX\", \"linkWidth\"],\n  _excluded2 = [\"className\", \"style\", \"children\", \"id\"];\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nfunction _objectWithoutProperties(e, t) { if (null == e) return {}; var o, r, i = _objectWithoutPropertiesLoose(e, t); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); for (r = 0; r < n.length; r++) o = n[r], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]); } return i; }\nfunction _objectWithoutPropertiesLoose(r, e) { if (null == r) return {}; var t = {}; for (var n in r) if ({}.hasOwnProperty.call(r, n)) { if (-1 !== e.indexOf(n)) continue; t[n] = r[n]; } return t; }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nimport * as React from 'react';\nimport { useCallback, useMemo, useState } from 'react';\nimport maxBy from 'es-toolkit/compat/maxBy';\nimport sumBy from 'es-toolkit/compat/sumBy';\nimport get from 'es-toolkit/compat/get';\nimport { Surface } from '../container/Surface';\nimport { Layer } from '../container/Layer';\nimport { Rectangle } from '../shape/Rectangle';\nimport { getValueByDataKey } from '../util/ChartUtils';\nimport { ReportChartMargin, ReportChartSize, useChartHeight, useChartWidth } from '../context/chartLayoutContext';\nimport { TooltipPortalContext } from '../context/tooltipPortalContext';\nimport { RechartsWrapper } from './RechartsWrapper';\nimport { RechartsStoreProvider } from '../state/RechartsStoreProvider';\nimport { useAppDispatch } from '../state/hooks';\nimport { mouseLeaveItem, setActiveClickItemIndex, setActiveMouseOverItemIndex } from '../state/tooltipSlice';\nimport { SetTooltipEntrySettings } from '../state/SetTooltipEntrySettings';\nimport { SetComputedData } from '../context/chartDataContext';\nimport { svgPropertiesNoEvents, svgPropertiesNoEventsFromUnknown } from '../util/svgPropertiesNoEvents';\nimport { resolveDefaultProps } from '../util/resolveDefaultProps';\nimport { isPositiveNumber } from '../util/isWellBehavedNumber';\nimport { isNotNil, noop } from '../util/DataUtils';\nimport { RegisterGraphicalItemId } from '../context/RegisterGraphicalItemId';\nvar interpolationGenerator = (a, b) => {\n  var ka = +a;\n  var kb = b - ka;\n  return t => ka + kb * t;\n};\nvar centerY = node => node.y + node.dy / 2;\n\n// TODO why is this not reading dataKey?\nvar getValue = entry => entry && entry.value || 0;\nvar getSumOfIds = (links, ids) => ids.reduce((result, id) => result + getValue(links[id]), 0);\nvar getSumWithWeightedSource = (tree, links, ids) => ids.reduce((result, id) => {\n  var link = links[id];\n  if (link == null) {\n    return result;\n  }\n  var sourceNode = tree[link.source];\n  if (sourceNode == null) {\n    return result;\n  }\n  return result + centerY(sourceNode) * getValue(links[id]);\n}, 0);\nvar getSumWithWeightedTarget = (tree, links, ids) => ids.reduce((result, id) => {\n  var link = links[id];\n  if (link == null) {\n    return result;\n  }\n  var targetNode = tree[link.target];\n  if (targetNode == null) {\n    return result;\n  }\n  return result + centerY(targetNode) * getValue(links[id]);\n}, 0);\nvar ascendingY = (a, b) => a.y - b.y;\nvar searchTargetsAndSources = (links, id) => {\n  var sourceNodes = [];\n  var sourceLinks = [];\n  var targetNodes = [];\n  var targetLinks = [];\n  for (var i = 0, len = links.length; i < len; i++) {\n    var link = links[i];\n    if ((link === null || link === void 0 ? void 0 : link.source) === id) {\n      targetNodes.push(link.target);\n      targetLinks.push(i);\n    }\n    if ((link === null || link === void 0 ? void 0 : link.target) === id) {\n      sourceNodes.push(link.source);\n      sourceLinks.push(i);\n    }\n  }\n  return {\n    sourceNodes,\n    sourceLinks,\n    targetLinks,\n    targetNodes\n  };\n};\nvar updateDepthOfTargets = (tree, curNode) => {\n  var {\n    targetNodes\n  } = curNode;\n  for (var i = 0, len = targetNodes.length; i < len; i++) {\n    var targetNode = targetNodes[i];\n    if (targetNode == null) {\n      continue;\n    }\n    var target = tree[targetNode];\n    if (target) {\n      target.depth = Math.max(curNode.depth + 1, target.depth);\n      updateDepthOfTargets(tree, target);\n    }\n  }\n};\nvar getNodesTree = (_ref, width, nodeWidth, align) => {\n  var _maxBy$depth, _maxBy;\n  var {\n    nodes,\n    links\n  } = _ref;\n  var tree = nodes.map((entry, index) => {\n    var result = searchTargetsAndSources(links, index);\n    return _objectSpread(_objectSpread(_objectSpread({}, entry), result), {}, {\n      value: Math.max(getSumOfIds(links, result.sourceLinks), getSumOfIds(links, result.targetLinks)),\n      depth: 0\n    });\n  });\n  for (var i = 0, len = tree.length; i < len; i++) {\n    var node = tree[i];\n    if (node != null && !node.sourceNodes.length) {\n      updateDepthOfTargets(tree, node);\n    }\n  }\n  var maxDepth = (_maxBy$depth = (_maxBy = maxBy(tree, entry => entry.depth)) === null || _maxBy === void 0 ? void 0 : _maxBy.depth) !== null && _maxBy$depth !== void 0 ? _maxBy$depth : 0;\n  if (maxDepth >= 1) {\n    var childWidth = (width - nodeWidth) / maxDepth;\n    for (var _i = 0, _len = tree.length; _i < _len; _i++) {\n      var _node = tree[_i];\n      if (_node == null) {\n        continue;\n      }\n      if (!_node.targetNodes.length) {\n        if (align === 'justify') {\n          _node.depth = maxDepth;\n        }\n      }\n      _node.x = _node.depth * childWidth;\n      _node.dx = nodeWidth;\n    }\n  }\n  return {\n    tree,\n    maxDepth\n  };\n};\nvar getDepthTree = tree => {\n  var result = [];\n  for (var i = 0, len = tree.length; i < len; i++) {\n    var _result$node$depth;\n    var node = tree[i];\n    if (node == null) {\n      continue;\n    }\n    if (!result[node.depth]) {\n      result[node.depth] = [];\n    }\n    (_result$node$depth = result[node.depth]) === null || _result$node$depth === void 0 || _result$node$depth.push(node);\n  }\n  return result;\n};\nvar updateYOfTree = (depthTree, height, nodePadding, links, verticalAlign) => {\n  var yRatio = Math.min(...depthTree.map(nodes => (height - (nodes.length - 1) * nodePadding) / sumBy(nodes, getValue)));\n  for (var d = 0, maxDepth = depthTree.length; d < maxDepth; d++) {\n    var nodes = depthTree[d];\n    if (nodes == null) {\n      continue;\n    }\n    if (verticalAlign === 'top') {\n      var currentY = 0;\n      for (var i = 0, len = nodes.length; i < len; i++) {\n        var node = nodes[i];\n        if (node == null) {\n          continue;\n        }\n        node.dy = node.value * yRatio;\n        node.y = currentY;\n        currentY += node.dy + nodePadding;\n      }\n    } else {\n      for (var _i2 = 0, _len2 = nodes.length; _i2 < _len2; _i2++) {\n        var _node2 = nodes[_i2];\n        if (_node2 == null) {\n          continue;\n        }\n        _node2.y = _i2;\n        _node2.dy = _node2.value * yRatio;\n      }\n    }\n  }\n  return links.map(link => _objectSpread(_objectSpread({}, link), {}, {\n    dy: getValue(link) * yRatio\n  }));\n};\nvar resolveCollisions = function resolveCollisions(depthTree, height, nodePadding) {\n  var sort = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n  for (var i = 0, len = depthTree.length; i < len; i++) {\n    var nodes = depthTree[i];\n    if (nodes == null) {\n      continue;\n    }\n    var n = nodes.length;\n\n    // Sort by the value of y\n    if (sort) {\n      nodes.sort(ascendingY);\n    }\n    var y0 = 0;\n    for (var j = 0; j < n; j++) {\n      var node = nodes[j];\n      if (node == null) {\n        continue;\n      }\n      var dy = y0 - node.y;\n      if (dy > 0) {\n        node.y += dy;\n      }\n      y0 = node.y + node.dy + nodePadding;\n    }\n    y0 = height + nodePadding;\n    for (var _j = n - 1; _j >= 0; _j--) {\n      var _node3 = nodes[_j];\n      if (_node3 == null) {\n        continue;\n      }\n      var _dy = _node3.y + _node3.dy + nodePadding - y0;\n      if (_dy > 0) {\n        _node3.y -= _dy;\n        y0 = _node3.y;\n      } else {\n        break;\n      }\n    }\n  }\n};\nvar relaxLeftToRight = (tree, depthTree, links, alpha) => {\n  for (var i = 0, maxDepth = depthTree.length; i < maxDepth; i++) {\n    var nodes = depthTree[i];\n    if (nodes == null) {\n      continue;\n    }\n    for (var j = 0, len = nodes.length; j < len; j++) {\n      var node = nodes[j];\n      if (node == null) {\n        continue;\n      }\n      if (node.sourceLinks.length) {\n        var sourceSum = getSumOfIds(links, node.sourceLinks);\n        var weightedSum = getSumWithWeightedSource(tree, links, node.sourceLinks);\n        var y = weightedSum / sourceSum;\n        node.y += (y - centerY(node)) * alpha;\n      }\n    }\n  }\n};\nvar relaxRightToLeft = (tree, depthTree, links, alpha) => {\n  for (var i = depthTree.length - 1; i >= 0; i--) {\n    var nodes = depthTree[i];\n    if (nodes == null) {\n      continue;\n    }\n    for (var j = 0, len = nodes.length; j < len; j++) {\n      var node = nodes[j];\n      if (node == null) {\n        continue;\n      }\n      if (node.targetLinks.length) {\n        var targetSum = getSumOfIds(links, node.targetLinks);\n        var weightedSum = getSumWithWeightedTarget(tree, links, node.targetLinks);\n        var y = weightedSum / targetSum;\n        node.y += (y - centerY(node)) * alpha;\n      }\n    }\n  }\n};\nvar updateYOfLinks = (tree, links) => {\n  for (var i = 0, len = tree.length; i < len; i++) {\n    var node = tree[i];\n    if (node == null) {\n      continue;\n    }\n    var sy = 0;\n    var ty = 0;\n    node.targetLinks.sort((a, b) => {\n      var _links$a, _links$b, _tree$targetA, _tree$targetB;\n      var targetA = (_links$a = links[a]) === null || _links$a === void 0 ? void 0 : _links$a.target;\n      var targetB = (_links$b = links[b]) === null || _links$b === void 0 ? void 0 : _links$b.target;\n      if (targetA == null || targetB == null) {\n        return 0;\n      }\n      var yA = (_tree$targetA = tree[targetA]) === null || _tree$targetA === void 0 ? void 0 : _tree$targetA.y;\n      var yB = (_tree$targetB = tree[targetB]) === null || _tree$targetB === void 0 ? void 0 : _tree$targetB.y;\n      if (yA == null || yB == null) {\n        return 0;\n      }\n      return yA - yB;\n    });\n    node.sourceLinks.sort((a, b) => {\n      var _links$a2, _links$b2, _tree$sourceA, _tree$sourceB;\n      var sourceA = (_links$a2 = links[a]) === null || _links$a2 === void 0 ? void 0 : _links$a2.source;\n      var sourceB = (_links$b2 = links[b]) === null || _links$b2 === void 0 ? void 0 : _links$b2.source;\n      if (sourceA == null || sourceB == null) {\n        return 0;\n      }\n      var yA = (_tree$sourceA = tree[sourceA]) === null || _tree$sourceA === void 0 ? void 0 : _tree$sourceA.y;\n      var yB = (_tree$sourceB = tree[sourceB]) === null || _tree$sourceB === void 0 ? void 0 : _tree$sourceB.y;\n      if (yA == null || yB == null) {\n        return 0;\n      }\n      return yA - yB;\n    });\n    for (var j = 0, tLen = node.targetLinks.length; j < tLen; j++) {\n      var targetLink = node.targetLinks[j];\n      if (targetLink == null) {\n        continue;\n      }\n      var link = links[targetLink];\n      if (link) {\n        // @ts-expect-error we should refactor this to immutable\n        link.sy = sy;\n        sy += link.dy;\n      }\n    }\n    for (var _j2 = 0, sLen = node.sourceLinks.length; _j2 < sLen; _j2++) {\n      var sourceLink = node.sourceLinks[_j2];\n      if (sourceLink == null) {\n        continue;\n      }\n      var _link = links[sourceLink];\n      if (_link) {\n        // @ts-expect-error we should refactor this to immutable\n        _link.ty = ty;\n        ty += _link.dy;\n      }\n    }\n  }\n};\nvar computeData = _ref2 => {\n  var {\n    data,\n    width,\n    height,\n    iterations,\n    nodeWidth,\n    nodePadding,\n    sort,\n    verticalAlign,\n    align\n  } = _ref2;\n  var {\n    links\n  } = data;\n  var {\n    tree\n  } = getNodesTree(data, width, nodeWidth, align);\n  var depthTree = getDepthTree(tree);\n  var linksWithDy = updateYOfTree(depthTree, height, nodePadding, links, verticalAlign);\n  resolveCollisions(depthTree, height, nodePadding, sort);\n  if (verticalAlign === 'justify') {\n    var alpha = 1;\n    for (var i = 1; i <= iterations; i++) {\n      relaxRightToLeft(tree, depthTree, linksWithDy, alpha *= 0.99);\n      resolveCollisions(depthTree, height, nodePadding, sort);\n      relaxLeftToRight(tree, depthTree, linksWithDy, alpha);\n      resolveCollisions(depthTree, height, nodePadding, sort);\n    }\n  }\n  updateYOfLinks(tree, linksWithDy);\n  // @ts-expect-error updateYOfLinks modifies the links array to add sy and ty in place\n  var newLinks = linksWithDy;\n  return {\n    nodes: tree,\n    links: newLinks\n  };\n};\nvar getNodeCoordinateOfTooltip = item => {\n  return {\n    x: +item.x + +item.width / 2,\n    y: +item.y + +item.height / 2\n  };\n};\nvar getLinkCoordinateOfTooltip = item => {\n  return 'sourceX' in item ? {\n    x: (item.sourceX + item.targetX) / 2,\n    y: (item.sourceY + item.targetY) / 2\n  } : undefined;\n};\nvar getPayloadOfTooltip = (item, type, nameKey) => {\n  var {\n    payload\n  } = item;\n  if (type === 'node') {\n    return {\n      payload,\n      name: getValueByDataKey(payload, nameKey, ''),\n      value: getValueByDataKey(payload, 'value')\n    };\n  }\n  if ('source' in payload && payload.source && payload.target) {\n    var sourceName = getValueByDataKey(payload.source, nameKey, '');\n    var targetName = getValueByDataKey(payload.target, nameKey, '');\n    return {\n      payload,\n      name: \"\".concat(sourceName, \" - \").concat(targetName),\n      value: getValueByDataKey(payload, 'value')\n    };\n  }\n  return undefined;\n};\nexport var sankeyPayloadSearcher = (_, activeIndex, computedData, nameKey) => {\n  if (activeIndex == null || typeof activeIndex !== 'string') {\n    return undefined;\n  }\n  if (computedData == null || typeof computedData !== 'object') {\n    return undefined;\n  }\n  var splitIndex = activeIndex.split('-');\n  var [targetType, index] = splitIndex;\n  var item = get(computedData, \"\".concat(targetType, \"s[\").concat(index, \"]\"));\n  if (item) {\n    var payload = getPayloadOfTooltip(item, targetType, nameKey);\n    return payload;\n  }\n  return undefined;\n};\nvar options = {\n  chartName: 'Sankey',\n  defaultTooltipEventType: 'item',\n  validateTooltipEventTypes: ['item'],\n  tooltipPayloadSearcher: sankeyPayloadSearcher,\n  eventEmitter: undefined\n};\nvar SetSankeyTooltipEntrySettings = /*#__PURE__*/React.memo(_ref3 => {\n  var {\n    dataKey,\n    nameKey,\n    stroke,\n    strokeWidth,\n    fill,\n    name,\n    data,\n    id\n  } = _ref3;\n  var tooltipEntrySettings = {\n    dataDefinedOnItem: data,\n    getPosition: noop,\n    settings: {\n      stroke,\n      strokeWidth,\n      fill,\n      dataKey,\n      name,\n      nameKey,\n      hide: false,\n      type: undefined,\n      color: fill,\n      unit: '',\n      graphicalItemId: id\n    }\n  };\n  return /*#__PURE__*/React.createElement(SetTooltipEntrySettings, {\n    tooltipEntrySettings: tooltipEntrySettings\n  });\n});\n\n// TODO: improve types - NodeOptions uses SankeyNode, LinkOptions uses LinkProps. Standardize.\n\nfunction renderLinkItem(option, props) {\n  if (/*#__PURE__*/React.isValidElement(option)) {\n    return /*#__PURE__*/React.cloneElement(option, props);\n  }\n  if (typeof option === 'function') {\n    return option(props);\n  }\n  var {\n      sourceX,\n      sourceY,\n      sourceControlX,\n      targetX,\n      targetY,\n      targetControlX,\n      linkWidth\n    } = props,\n    others = _objectWithoutProperties(props, _excluded);\n  return /*#__PURE__*/React.createElement(\"path\", _extends({\n    className: \"recharts-sankey-link\",\n    d: \"\\n          M\".concat(sourceX, \",\").concat(sourceY, \"\\n          C\").concat(sourceControlX, \",\").concat(sourceY, \" \").concat(targetControlX, \",\").concat(targetY, \" \").concat(targetX, \",\").concat(targetY, \"\\n        \"),\n    fill: \"none\",\n    stroke: \"#333\",\n    strokeWidth: linkWidth,\n    strokeOpacity: \"0.2\"\n  }, svgPropertiesNoEvents(others)));\n}\nvar buildLinkProps = _ref4 => {\n  var {\n    link,\n    nodes,\n    left,\n    top,\n    i,\n    linkContent,\n    linkCurvature\n  } = _ref4;\n  var {\n    sy: sourceRelativeY,\n    ty: targetRelativeY,\n    dy: linkWidth\n  } = link;\n  var sourceNode = nodes[link.source];\n  var targetNode = nodes[link.target];\n  if (sourceNode == null || targetNode == null) {\n    return undefined;\n  }\n  var sourceX = sourceNode.x + sourceNode.dx + left;\n  var targetX = targetNode.x + left;\n  var interpolationFunc = interpolationGenerator(sourceX, targetX);\n  var sourceControlX = interpolationFunc(linkCurvature);\n  var targetControlX = interpolationFunc(1 - linkCurvature);\n  var sourceY = sourceNode.y + sourceRelativeY + linkWidth / 2 + top;\n  var targetY = targetNode.y + targetRelativeY + linkWidth / 2 + top;\n  var linkProps = _objectSpread({\n    sourceX,\n    // @ts-expect-error the linkContent from below is contributing unknown props\n    targetX,\n    sourceY,\n    // @ts-expect-error the linkContent from below is contributing unknown props\n    targetY,\n    sourceControlX,\n    targetControlX,\n    sourceRelativeY,\n    targetRelativeY,\n    linkWidth,\n    index: i,\n    payload: _objectSpread(_objectSpread({}, link), {}, {\n      source: sourceNode,\n      target: targetNode\n    })\n  }, svgPropertiesNoEventsFromUnknown(linkContent));\n  return linkProps;\n};\nfunction SankeyLinkElement(_ref5) {\n  var {\n    graphicalItemId,\n    props,\n    i,\n    linkContent,\n    onMouseEnter: _onMouseEnter,\n    onMouseLeave: _onMouseLeave,\n    onClick: _onClick,\n    dataKey\n  } = _ref5;\n  var activeCoordinate = getLinkCoordinateOfTooltip(props);\n  var activeIndex = \"link-\".concat(i);\n  var dispatch = useAppDispatch();\n  var events = {\n    onMouseEnter: e => {\n      dispatch(setActiveMouseOverItemIndex({\n        activeIndex,\n        activeDataKey: dataKey,\n        activeCoordinate,\n        activeGraphicalItemId: graphicalItemId\n      }));\n      _onMouseEnter(props, e);\n    },\n    onMouseLeave: e => {\n      dispatch(mouseLeaveItem());\n      _onMouseLeave(props, e);\n    },\n    onClick: e => {\n      dispatch(setActiveClickItemIndex({\n        activeIndex,\n        activeDataKey: dataKey,\n        activeCoordinate,\n        activeGraphicalItemId: graphicalItemId\n      }));\n      _onClick(props, e);\n    }\n  };\n  return /*#__PURE__*/React.createElement(Layer, events, renderLinkItem(linkContent, props));\n}\nfunction AllSankeyLinkElements(_ref6) {\n  var {\n    graphicalItemId,\n    modifiedLinks,\n    links,\n    linkContent,\n    onMouseEnter,\n    onMouseLeave,\n    onClick,\n    dataKey\n  } = _ref6;\n  return /*#__PURE__*/React.createElement(Layer, {\n    className: \"recharts-sankey-links\",\n    key: \"recharts-sankey-links\"\n  }, links.map((link, i) => {\n    var linkProps = modifiedLinks[i];\n    if (linkProps == null) {\n      return null;\n    }\n    return /*#__PURE__*/React.createElement(SankeyLinkElement, {\n      graphicalItemId: graphicalItemId,\n      key: \"link-\".concat(link.source, \"-\").concat(link.target, \"-\").concat(link.value),\n      props: linkProps,\n      linkContent: linkContent,\n      i: i,\n      onMouseEnter: onMouseEnter,\n      onMouseLeave: onMouseLeave,\n      onClick: onClick,\n      dataKey: dataKey\n    });\n  }));\n}\nfunction renderNodeItem(option, props) {\n  if (/*#__PURE__*/React.isValidElement(option)) {\n    return /*#__PURE__*/React.cloneElement(option, props);\n  }\n  if (typeof option === 'function') {\n    return option(props);\n  }\n  return (\n    /*#__PURE__*/\n    // @ts-expect-error recharts radius is not compatible with SVG radius\n    React.createElement(Rectangle, _extends({\n      className: \"recharts-sankey-node\",\n      fill: \"#0088fe\",\n      fillOpacity: \"0.8\"\n    }, svgPropertiesNoEvents(props)))\n  );\n}\nvar buildNodeProps = _ref7 => {\n  var {\n    node,\n    nodeContent,\n    top,\n    left,\n    i\n  } = _ref7;\n  var {\n    x,\n    y,\n    dx,\n    dy\n  } = node;\n  // @ts-expect-error nodeContent is passing in unknown props\n  var nodeProps = _objectSpread(_objectSpread({}, svgPropertiesNoEventsFromUnknown(nodeContent)), {}, {\n    x: x + left,\n    y: y + top,\n    width: dx,\n    height: dy,\n    index: i,\n    payload: node\n  });\n  return nodeProps;\n};\nfunction NodeElement(_ref8) {\n  var {\n    graphicalItemId,\n    props,\n    nodeContent,\n    i,\n    onMouseEnter: _onMouseEnter2,\n    onMouseLeave: _onMouseLeave2,\n    onClick: _onClick2,\n    dataKey\n  } = _ref8;\n  var dispatch = useAppDispatch();\n  var activeCoordinate = getNodeCoordinateOfTooltip(props);\n  var activeIndex = \"node-\".concat(i);\n  var events = {\n    onMouseEnter: e => {\n      dispatch(setActiveMouseOverItemIndex({\n        activeIndex,\n        activeDataKey: dataKey,\n        activeCoordinate,\n        activeGraphicalItemId: graphicalItemId\n      }));\n      _onMouseEnter2(props, e);\n    },\n    onMouseLeave: e => {\n      dispatch(mouseLeaveItem());\n      _onMouseLeave2(props, e);\n    },\n    onClick: e => {\n      dispatch(setActiveClickItemIndex({\n        activeIndex,\n        activeDataKey: dataKey,\n        activeCoordinate,\n        activeGraphicalItemId: graphicalItemId\n      }));\n      _onClick2(props, e);\n    }\n  };\n  return /*#__PURE__*/React.createElement(Layer, events, renderNodeItem(nodeContent, props));\n}\nfunction AllNodeElements(_ref9) {\n  var {\n    graphicalItemId,\n    modifiedNodes,\n    nodeContent,\n    onMouseEnter,\n    onMouseLeave,\n    onClick,\n    dataKey\n  } = _ref9;\n  return /*#__PURE__*/React.createElement(Layer, {\n    className: \"recharts-sankey-nodes\",\n    key: \"recharts-sankey-nodes\"\n  }, modifiedNodes.map((modifiedNode, i) => {\n    return /*#__PURE__*/React.createElement(NodeElement, {\n      graphicalItemId: graphicalItemId,\n      key: \"node-\".concat(modifiedNode.index, \"-\").concat(modifiedNode.x, \"-\").concat(modifiedNode.y),\n      props: modifiedNode,\n      nodeContent: nodeContent,\n      i: i,\n      onMouseEnter: onMouseEnter,\n      onMouseLeave: onMouseLeave,\n      onClick: onClick,\n      dataKey: dataKey\n    });\n  }));\n}\nexport var sankeyDefaultProps = {\n  align: 'justify',\n  dataKey: 'value',\n  iterations: 32,\n  linkCurvature: 0.5,\n  margin: {\n    top: 5,\n    right: 5,\n    bottom: 5,\n    left: 5\n  },\n  nameKey: 'name',\n  nodePadding: 10,\n  nodeWidth: 10,\n  sort: true,\n  verticalAlign: 'justify'\n};\nfunction SankeyImpl(props) {\n  var {\n      className,\n      style,\n      children,\n      id\n    } = props,\n    others = _objectWithoutProperties(props, _excluded2);\n  var {\n    link,\n    dataKey,\n    node,\n    onMouseEnter,\n    onMouseLeave,\n    onClick,\n    data,\n    iterations,\n    nodeWidth,\n    nodePadding,\n    sort,\n    linkCurvature,\n    margin,\n    verticalAlign,\n    align\n  } = props;\n  var attrs = svgPropertiesNoEvents(others);\n  var width = useChartWidth();\n  var height = useChartHeight();\n  var {\n    links,\n    modifiedLinks,\n    modifiedNodes\n  } = useMemo(() => {\n    var _margin$left, _margin$right, _margin$top, _margin$bottom;\n    if (!data || !width || !height || width <= 0 || height <= 0) {\n      return {\n        nodes: [],\n        links: [],\n        modifiedLinks: [],\n        modifiedNodes: []\n      };\n    }\n    var contentWidth = width - ((_margin$left = margin.left) !== null && _margin$left !== void 0 ? _margin$left : 0) - ((_margin$right = margin.right) !== null && _margin$right !== void 0 ? _margin$right : 0);\n    var contentHeight = height - ((_margin$top = margin.top) !== null && _margin$top !== void 0 ? _margin$top : 0) - ((_margin$bottom = margin.bottom) !== null && _margin$bottom !== void 0 ? _margin$bottom : 0);\n    var computed = computeData({\n      data,\n      width: contentWidth,\n      height: contentHeight,\n      iterations,\n      nodeWidth,\n      nodePadding,\n      sort,\n      verticalAlign,\n      align\n    });\n    var top = margin.top || 0;\n    var left = margin.left || 0;\n    var newModifiedLinks = computed.links.map((l, i) => {\n      return buildLinkProps({\n        link: l,\n        nodes: computed.nodes,\n        i,\n        top,\n        left,\n        linkContent: link,\n        linkCurvature\n      });\n    }).filter(isNotNil);\n    var newModifiedNodes = computed.nodes.map((n, i) => {\n      return buildNodeProps({\n        node: n,\n        nodeContent: node,\n        i,\n        top,\n        left\n      });\n    });\n    return {\n      nodes: computed.nodes,\n      links: computed.links,\n      modifiedLinks: newModifiedLinks,\n      modifiedNodes: newModifiedNodes\n    };\n  }, [data, width, height, margin, iterations, nodeWidth, nodePadding, sort, link, node, linkCurvature, align, verticalAlign]);\n  var handleMouseEnter = useCallback((item, type, e) => {\n    if (onMouseEnter) {\n      onMouseEnter(item, type, e);\n    }\n  }, [onMouseEnter]);\n  var handleMouseLeave = useCallback((item, type, e) => {\n    if (onMouseLeave) {\n      onMouseLeave(item, type, e);\n    }\n  }, [onMouseLeave]);\n  var handleClick = useCallback((item, type, e) => {\n    if (onClick) {\n      onClick(item, type, e);\n    }\n  }, [onClick]);\n  if (!isPositiveNumber(width) || !isPositiveNumber(height) || !data || !data.links || !data.nodes) {\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(SetComputedData, {\n    computedData: {\n      links: modifiedLinks,\n      nodes: modifiedNodes\n    }\n  }), /*#__PURE__*/React.createElement(Surface, _extends({}, attrs, {\n    width: width,\n    height: height\n  }), children, /*#__PURE__*/React.createElement(AllSankeyLinkElements, {\n    graphicalItemId: id,\n    links: links,\n    modifiedLinks: modifiedLinks,\n    linkContent: link,\n    dataKey: dataKey,\n    onMouseEnter: (linkProps, e) => handleMouseEnter(linkProps, 'link', e),\n    onMouseLeave: (linkProps, e) => handleMouseLeave(linkProps, 'link', e),\n    onClick: (linkProps, e) => handleClick(linkProps, 'link', e)\n  }), /*#__PURE__*/React.createElement(AllNodeElements, {\n    graphicalItemId: id,\n    modifiedNodes: modifiedNodes,\n    nodeContent: node,\n    dataKey: dataKey,\n    onMouseEnter: (nodeProps, e) => handleMouseEnter(nodeProps, 'node', e),\n    onMouseLeave: (nodeProps, e) => handleMouseLeave(nodeProps, 'node', e),\n    onClick: (nodeProps, e) => handleClick(nodeProps, 'node', e)\n  })));\n}\n\n/**\n * Flow diagram in which the width of the arrows is proportional to the flow rate.\n * It is typically used to visualize energy or material or cost transfers between processes.\n *\n * @consumes ResponsiveContainerContext\n * @provides TooltipEntrySettings\n */\nexport function Sankey(outsideProps) {\n  var props = resolveDefaultProps(outsideProps, sankeyDefaultProps);\n  var {\n    width,\n    height,\n    style,\n    className,\n    id: externalId\n  } = props;\n  var [tooltipPortal, setTooltipPortal] = useState(null);\n  return /*#__PURE__*/React.createElement(RechartsStoreProvider, {\n    preloadedState: {\n      options\n    },\n    reduxStoreName: className !== null && className !== void 0 ? className : 'Sankey'\n  }, /*#__PURE__*/React.createElement(ReportChartSize, {\n    width: width,\n    height: height\n  }), /*#__PURE__*/React.createElement(ReportChartMargin, {\n    margin: props.margin\n  }), /*#__PURE__*/React.createElement(RechartsWrapper, {\n    className: className,\n    style: style,\n    width: width,\n    height: height\n    /*\n     * Sankey, same as Treemap, suffers from overfilling the container\n     * and causing infinite render loops where the chart keeps growing.\n     */,\n    responsive: false,\n    ref: node => {\n      if (node && !tooltipPortal) {\n        setTooltipPortal(node);\n      }\n    },\n    onMouseEnter: undefined,\n    onMouseLeave: undefined,\n    onClick: undefined,\n    onMouseMove: undefined,\n    onMouseDown: undefined,\n    onMouseUp: undefined,\n    onContextMenu: undefined,\n    onDoubleClick: undefined,\n    onTouchStart: undefined,\n    onTouchMove: undefined,\n    onTouchEnd: undefined\n  }, /*#__PURE__*/React.createElement(TooltipPortalContext.Provider, {\n    value: tooltipPortal\n  }, /*#__PURE__*/React.createElement(RegisterGraphicalItemId, {\n    id: externalId,\n    type: \"sankey\"\n  }, id => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(SetSankeyTooltipEntrySettings, {\n    dataKey: props.dataKey,\n    nameKey: props.nameKey,\n    stroke: props.stroke,\n    strokeWidth: props.strokeWidth,\n    fill: props.fill,\n    name: props.name,\n    data: props.data,\n    id: id\n  }), /*#__PURE__*/React.createElement(SankeyImpl, _extends({}, props, {\n    id: id\n  })))))));\n}\nSankey.displayName = 'Sankey';"],"mappings":"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"},"metadata":{},"sourceType":"module"}